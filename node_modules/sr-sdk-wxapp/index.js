/**
 * sr-sdk-wxapp v1.8.3-beta.2
 * (c) 2022 tabpan,glennzou,edenxing
 * @license ISC
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SRT=e()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var r=function(){return(r=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function i(t,e,r,i){var n,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,r,s):n(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function n(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}try{Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,i=new Array(r);r--;)i[r]=[e[r],t[e[r]]];return i}),Array.prototype.includes||(Array.prototype.includes=function(t){return!!~this.indexOf(t)})}catch(t){console.error("polyfill exec failed",t)}var o=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys||function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e);return e},a=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function h(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}var c=h;h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0;var u,f=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),u=0===l.x}catch(t){u=!1}function d(t){return void 0===t._maxListeners?h.defaultMaxListeners:t._maxListeners}function p(t,e,r){if(e)t.call(r);else for(var i=t.length,n=w(t,i),o=0;o<i;++o)n[o].call(r)}function g(t,e,r,i){if(e)t.call(r,i);else for(var n=t.length,o=w(t,n),s=0;s<n;++s)o[s].call(r,i)}function v(t,e,r,i,n){if(e)t.call(r,i,n);else for(var o=t.length,s=w(t,o),a=0;a<o;++a)s[a].call(r,i,n)}function y(t,e,r,i,n,o){if(e)t.call(r,i,n,o);else for(var s=t.length,a=w(t,s),h=0;h<s;++h)a[h].call(r,i,n,o)}function _(t,e,r,i){if(e)t.apply(r,i);else for(var n=t.length,o=w(t,n),s=0;s<n;++s)o[s].apply(r,i)}function m(t,e,r,i){var n,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]):(s=t._events=o(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(n=d(t))&&n>0&&a.length>n){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",h.name,h.message)}}else a=s[e]=r,++t._eventsCount;return t}function x(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function k(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=a.call(x,i);return n.listener=r,i.wrapFn=n,n}function S(t,e,r){var i=t._events;if(!i)return[];var n=i[e];return n?"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):w(n,n.length):[]}function b(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function w(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}u?Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');f=t}}):h.defaultMaxListeners=f,h.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},h.prototype.getMaxListeners=function(){return d(this)},h.prototype.emit=function(t){var e,r,i,n,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var h=new Error('Unhandled "error" event. ('+e+")");throw h.context=e,h}if(!(r=s[t]))return!1;var c="function"==typeof r;switch(i=arguments.length){case 1:p(r,c,this);break;case 2:g(r,c,this,arguments[1]);break;case 3:v(r,c,this,arguments[1],arguments[2]);break;case 4:y(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(i-1),o=1;o<i;o++)n[o-1]=arguments[o];_(r,c,this,n)}return!0},h.prototype.addListener=function(t,e){return m(this,t,e,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(t,e){return m(this,t,e,!0)},h.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,k(this,t,e)),this},h.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,k(this,t,e)),this},h.prototype.removeListener=function(t,e){var r,i,n,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=o(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop()}(r,n),1===r.length&&(i[t]=r[0]),i.removeListener&&this.emit("removeListener",t,a||e)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(t){var e,r,i;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=o(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=o(null):delete r[t]),this;if(0===arguments.length){var n,a=s(r);for(i=0;i<a.length;++i)"removeListener"!==(n=a[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},h.prototype.offAll=h.prototype.removeAllListeners,h.prototype.listeners=function(t){return S(this,t,!0)},h.prototype.rawListeners=function(t){return S(this,t,!1)},h.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):b.call(t,e)},h.prototype.listenerCount=b,h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var C;!function(t){t.STORAGE_SET="storageSet",t.STORAGE_REMOVE="storageRemove"}(C||(C={}));class I extends c{constructor({appVersion:t,expires:e,env:r,enableMemoryCache:i}={}){super(),this.config={},this.memoryCache={},this.config={appVersion:t,expires:e,env:r,enableMemoryCache:i}}fillMemoryCache(){return Promise.resolve().then(()=>new Promise((t,e)=>{wx.getStorageInfo({success:e=>t(e.keys),fail:t=>e(t)})})).then(t=>{const e=[];return t.forEach(t=>{e.push(new Promise(e=>{wx.getStorage({key:t,success:r=>e({key:t,value:r.data}),fail:()=>e()})}))}),Promise.all(e)}).then(t=>{t.forEach(({key:t,value:e}={})=>{t&&e&&(this.memoryCache[t]=e)})})}get(t){const e=this.beforeGet(t);return Promise.resolve().then(()=>{if(this.config.enableMemoryCache){const t=this.memoryCache[e];if(void 0!==t)return t}return new Promise((t,r)=>{wx.getStorage({key:e,success:r=>r.data?(this.config.enableMemoryCache&&void 0!==r.data&&(this.memoryCache[e]=r.data),t(r.data)):t(void 0),fail:t=>r(t)})})}).then(t=>{if(!t)return;return this.afterGet(t)})}getSync(t){const e=this.beforeGet(t);let r;return this.config.enableMemoryCache&&(r=this.memoryCache[e]),void 0===r&&(r=wx.getStorageSync(e),this.config.enableMemoryCache&&void 0!==r&&(this.memoryCache[e]=r)),this.afterGet(r)}set(t,e){const{key:r,value:i}=this.beforeSet(t,e);return this.config.enableMemoryCache&&(this.memoryCache[r]=i),new Promise((n,o)=>{wx.setStorage({key:r,data:i,success:r=>{n(r),this.emit(t,{action:C.STORAGE_SET,value:e})},fail:t=>o(t)})})}setSync(t,e){const{key:r,value:i}=this.beforeSet(t,e);this.config.enableMemoryCache&&(this.memoryCache[r]=i),wx.setStorageSync(r,i),this.emit(t,{action:C.STORAGE_SET,value:e})}remove(t){const e=this.beforeRemove(t);return this.config.enableMemoryCache&&void 0!==this.memoryCache[e]&&(this.memoryCache[e]=void 0),new Promise((r,i)=>{wx.removeStorage({key:e,success:e=>{r(e),this.emit(t,{action:C.STORAGE_REMOVE,value:null})},fail:t=>i(t)})})}removeSync(t){const e=this.beforeRemove(t);this.config.enableMemoryCache&&void 0!==this.memoryCache[e]&&(this.memoryCache[e]=void 0),wx.removeStorageSync(e),this.emit(t,{action:C.STORAGE_REMOVE,value:null})}clear(){return this.config.enableMemoryCache&&(this.memoryCache={}),new Promise((t,e)=>{wx.clearStorage({success:e=>{t(e),this.emit("storageClear")},fail:t=>e(t)})})}clearSync(){this.config.enableMemoryCache&&(this.memoryCache={}),wx.clearStorageSync(),this.emit("storageClear")}beforeSet(t,e){const r={data:e};return this.config.expires&&(r.expires=Date.now()+this.config.expires),{key:this.keyProxy(t),value:r}}beforeGet(t){return this.keyProxy(t)}afterGet(t){if(!t)return;const{expires:e,data:r}=t;return e&&(t=>t<=Date.now())(e)?void 0:r}beforeRemove(t){return this.keyProxy(t)}keyProxy(t){const e=[t],{appVersion:r,env:i}=this.config;return r&&e.push(r),i&&e.push(i),e.join(":")}}var A,O,T=function(t){return new I(function(t){void 0===t&&(t={env:""});var e={expires:7776e6,enableMemoryCache:!0,env:""};t.env&&(e.env=t.env);try{var r=wx.getAccountInfoSync().miniProgram.envVersion;e.env=r+":"+e.env}catch(t){}return e}({env:t}))},R=function(){function t(t){this.eventKeySuffix="_SR_MP_EVT_",this.unReportedEventKeys=[],this.storage=t,this.resumeUnReportedEventKeys()}return t.prototype.resumeUnReportedEventKeys=function(){var t=this;wx.getStorageInfoSync().keys.map((function(e){var r=e.indexOf(t.eventKeySuffix);r>0&&t.unReportedEventKeys.push(e.slice(0,r))}))},t.prototype.add=function(t,e){this.unReportedEventKeys.push(t),this.storage.setSync(""+t+this.eventKeySuffix,e)},t.prototype.remove=function(t){var e=this.unReportedEventKeys.indexOf(t);-1!==e&&this.unReportedEventKeys.splice(e,1),this.storage.remove(""+t+this.eventKeySuffix)},t.prototype.batchRemove=function(t){this.unReportedEventKeys=this.unReportedEventKeys.filter((function(e){return-1===t.indexOf(e)}));for(var e=0,r=t;e<r.length;e++){var i=r[e];this.storage.remove(""+i+this.eventKeySuffix)}},t.prototype.getStoreData=function(){for(var t=[],e=this.unReportedEventKeys.length-1;e>=0;e--){var r=this.storage.getSync(""+this.unReportedEventKeys[e]+this.eventKeySuffix);r?t.push(r):this.unReportedEventKeys.splice(e,1)}return{keys:this.unReportedEventKeys,data:t}},t}(),E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",P=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,U=function(t){for(var e,r,i,n,o="",s=0,a=(t=String(t)).length%3;s<t.length;){if((r=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");o+=E.charAt((e=r<<16|i<<8|n)>>18&63)+E.charAt(e>>12&63)+E.charAt(e>>6&63)+E.charAt(63&e)}return a?o.slice(0,a-3)+"===".substring(a):o},q=function(t){return decodeURIComponent(function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!P.test(t))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");t+="==".slice(2-(3&t.length));for(var e,r,i,n="",o=0;o<t.length;)e=E.indexOf(t.charAt(o++))<<18|E.indexOf(t.charAt(o++))<<12|(r=E.indexOf(t.charAt(o++)))<<6|(i=E.indexOf(t.charAt(o++))),n+=64===r?String.fromCharCode(e>>16&255):64===i?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return n}(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},D={uint8ArrayToBase64:function(t){for(var e=[],r=0,i=t.length;r<i;r+=4096)e.push(String.fromCharCode.apply(null,t.subarray(r,r+4096)));return U(e.join(""))},encode:function(t){return function(t){return U(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){var r;return r="0x"+e,String.fromCharCode(r)})))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},decode:function(t){var e=(t=t.replace(/\-/g,"+").replace(/_/g,"/")).length%4;return e>0&&(t+="====".substring(e)),q(t)}},F=Object.prototype.toString,M=D,j=function(t){return"[object Object]"===F.call(t)},L=function(t){return"[object Array]"===F.call(t)},G=function(t,e){var r;void 0===e&&(e=0);var i=[];return function(){for(var n=arguments,o=[],s=0;s<arguments.length;s++)o[s]=n[s];return clearTimeout(r),r=setTimeout((function(){var e=t.apply(void 0,o);i.forEach((function(t){return t(e)})),i=[]}),e),new Promise((function(t){return i.push(t)}))}},N=function(){return Date.now()+"-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},H=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];return 0===e.length?{}:e.length<2?e[0]:e.reduce((function(t,e){if(!j(t)||!j(e))return console.error("deepMerge arguments only access object"),t;var r=t||{};return Object.entries(e).forEach((function(e){var i=e[0],o=e[1];if(void 0!==o)if(t[i])if(L(t[i])){if(!L(o))return void(r[i]=o);var s=L(o)?o:[o];r[i]=n(t[i],s)}else j(t[i])?r[i]=H(t[i],o):r[i]=o;else r[i]=o})),r}))},K=function(t){return!!/^[a-zA-Z\$_][a-zA-Z\d_]*$/.test(t)},z=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,W=function(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!z.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")},J=function(t){return isNaN(Number(t))?t:Number(t)},V=function(t){var e,r,i=t.replace(/^v/,"").replace(/\+.*$/,""),n=(r="-",-1===(e=i).indexOf(r)?e.length:e.indexOf(r)),o=i.substring(0,n).split(".");return o.push(i.substring(n+1)),o},B=function(t,e){[t,e].forEach(W);for(var r=V(t),i=V(e),n=0;n<Math.max(r.length-1,i.length-1);n++){var o=parseInt(r[n]||0,10),s=parseInt(i[n]||0,10);if(o>s)return 1;if(s>o)return-1}var a=r[r.length-1],h=i[i.length-1];if(a&&h){var c=a.split(".").map(J),u=h.split(".").map(J);for(n=0;n<Math.max(c.length,u.length);n++){if(void 0===c[n]||"string"==typeof u[n]&&"number"==typeof c[n])return-1;if(void 0===u[n]||"string"==typeof c[n]&&"number"==typeof u[n])return 1;if(c[n]>u[n])return 1;if(u[n]>c[n])return-1}}else if(a||h)return a?-1:1;return 0},Q=function(t){if("string"==typeof t)return t;try{return(JSON.stringify(t,(e=[],r=[],function(t,i){if(i instanceof Error)return"Error.message: "+i.message+" \n  Error.stack: "+i.stack;if("object"==typeof i&&null!==i){var n=e.indexOf(i);if(-1!==n)return"[Circular "+r[n]+"]";e.push(i),r.push(t||"root")}return i}),4)||"undefined").replace(/"/gim,"")}catch(t){return"error happen when sdk stringify: \n "+t.message+" \n "+t.stack}var e,r},Z=function(){return"undefined"!=typeof wx?wx:"undefined"!=typeof qq?qq:"undefined"!=typeof swan?swan:"undefined"!=typeof my?my:wx},X="TRACKING_ID_CONTEXT_MAP_ARRAY",$="USER_INFO",Y="LOGID_EVENTS",tt="IDENTIFIERUSER",et="WAITING",rt="REPORTING",it="PAUSED",nt="SDK_INTERNAL_ERROR",ot="JS_RUN_ERROR",st="AJAX_ERROR",at="ORDER_MISSING_ERROR",ht=["page","page_title","time","chan_wxapp_scene","chan_id","chan_refer_app_id","room_id"],ct=["app_id","open_id","user_id","union_id","local_id"],ut=function(t){function i(e){var r=t.call(this,e.request)||this;return r.stack=[],r.storage=null,r.resumeUnSendData=function(){var t=r.storage.getStoreData().data;console.log("resumeUnSendData",t),r.unshift(t)},r.add=function(t){var e=r.beforeAddQueue(t);r.storage.add(e.ext_uniq_id,e),r.stack.push(e)},r.getItems=function(){return r.stack},r.unshift=function(t){var e;return(e=r.stack).unshift.apply(e,t)},r.clean=function(){var t=r.stack;return r.stack=[],t},r.checkQueue=function(){r.stack.length>100&&(r.stack=r.stack.slice(-100))},r.option=e,r.storage=e.storage,r.beforeAddQueue=e.beforeAddQueue,r.resumeUnSendData(),r}return e(i,t),i.prototype.flush=function(t){var e=this;if(this.stack.length){var i=this.stack.map((function(e){if(!e.contextAdded){var i=t[e.tracking_id];if(i){var n=i[tt];e.props=r(r(r({},e.props),i),{idenTifier:i.idenTifier+n}),delete e.props[tt]}e.contextAdded=!0}return e}));this.stack=[];var o=i.map((function(t){var e=r({},t);return delete e.contextAdded,e}));this.request({events:o}).then((function(t){t.success?e.storage.batchRemove(i.map((function(t){return t.ext_uniq_id}))):e.stack=n(e.stack,i)})).catch((function(){e.stack=n(e.stack,i)}))}},i}((function(t){this.delay=100,this.upload=G(t,this.delay),this.request=t})),ft=wx,lt=[],dt=ft.request,pt=function(t){return lt.forEach((function(e){var r;try{t.requestStartTime=Date.now(),null===(r=e.onStart)||void 0===r||r.call(e,t)}catch(t){}})),dt(r(r({},t),{success:function(e){var r;lt.forEach((function(r){var i;try{null===(i=r.success)||void 0===i||i.call(r,e,t)}catch(t){try{A("sdk_error_log",{_sdk_error_log:{message:"request success error",type:nt,error:t.message}})}catch(t){}}})),null===(r=t.success)||void 0===r||r.call(t,e)},fail:function(e){var r;lt.forEach((function(r){var i;try{null===(i=r.fail)||void 0===i||i.call(r,e,t)}catch(t){try{A("sdk_error_log",{_sdk_error_log:{message:"request fail error",type:nt,error:t.message}})}catch(t){}}})),null===(r=t.fail)||void 0===r||r.call(t,e)},complete:function(e){var r;lt.forEach((function(r){var i;try{null===(i=r.complete)||void 0===i||i.call(r,e,t)}catch(t){try{A("sdk_error_log",{_sdk_error_log:{message:"request complete error",type:nt,error:t.message}})}catch(t){}}})),null===(r=t.complete)||void 0===r||r.call(t,e)}}))},gt=!1,vt=function(t,e){A||(A=e),!gt&&function(){try{Object.defineProperty(ft,"request",{get:function(){return pt}})}catch(t){console.warn("cannot override `request`, error is: ",t)}finally{gt=!0}}(),lt.push(t)},yt=wx,_t=wx,mt=[],xt=_t.requestPayment,kt=_t.requestOrderPayment,St=function(t,e){var i=xt;return"requestOrderPayment"==e&&(i=kt),mt.forEach((function(e){var r;try{null===(r=e.onStart)||void 0===r||r.call(e,t)}catch(t){try{O("sdk_error_log",{_sdk_error_log:{message:"requestPayment onStart error",type:nt,error:t.message}})}catch(t){}}})),i(r(r({},t),{success:function(e){var r;mt.forEach((function(r){var i;try{null===(i=r.success)||void 0===i||i.call(r,e,t)}catch(t){try{O("sdk_error_log",{_sdk_error_log:{message:"requestPayment success error",type:nt,error:t.message}})}catch(t){}}})),null===(r=t.success)||void 0===r||r.call(t,e)},fail:function(e){var r;mt.forEach((function(r){var i;try{null===(i=r.fail)||void 0===i||i.call(r,e,t)}catch(t){try{O("sdk_error_log",{_sdk_error_log:{message:"requestPayment fail error",type:nt,error:t.message}})}catch(t){}}})),null===(r=t.fail)||void 0===r||r.call(t,e)}}))},bt=!1,wt=function(t,e){O||(O=e),!bt&&function(){try{Object.defineProperty(_t,"requestPayment",{get:function(){return function(t){return St(t,"requestPayment")}}}),Object.defineProperty(_t,"requestOrderPayment",{get:function(){return function(t){return St(t,"requestOrderPayment")}}})}catch(t){console.warn("cannot override `requestPayment`, error is: ",t)}finally{bt=!0}}(),mt.push(t)},Ct=function(t,e,r){var i=r.value;return r.value=function(){var t;try{t=i.apply(this,arguments)}catch(t){try{console.error("Calling "+e+" error with",arguments),console.error(t);var r=this.getServerUrl();this.request({type:"sdk api exec error",props:{sr_sdk_version:this.version,system_info:this.getSystemInfo(),framework_info:this.getFrameworkInfo(),message:(t||{}).message||t,stack:(t||{}).stack}},{url:r,method:"POST"})}catch(t){}}return t},r},It=function(t,e,r){var i=r.value;return r.value=function(){if(this.inited)return i.apply(this,arguments);console.error("\u8bf7\u5148\u5b8c\u6210\u521d\u59cb\u5316")},r},At=function(){function t(){}return t.AddUnsigned=function(t,e){var r,i,n,o,s;return n=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(r=1073741824&t)&(i=1073741824&e)?2147483648^s^n^o:r|i?1073741824&s?3221225472^s^n^o:1073741824^s^n^o:s^n^o},t.FF=function(t,e,r,i,n,o,s){return t=this.AddUnsigned(t,this.AddUnsigned(this.AddUnsigned(this.F(e,r,i),n),s)),this.AddUnsigned(this.RotateLeft(t,o),e)},t.GG=function(t,e,r,i,n,o,s){return t=this.AddUnsigned(t,this.AddUnsigned(this.AddUnsigned(this.G(e,r,i),n),s)),this.AddUnsigned(this.RotateLeft(t,o),e)},t.HH=function(t,e,r,i,n,o,s){return t=this.AddUnsigned(t,this.AddUnsigned(this.AddUnsigned(this.H(e,r,i),n),s)),this.AddUnsigned(this.RotateLeft(t,o),e)},t.II=function(t,e,r,i,n,o,s){return t=this.AddUnsigned(t,this.AddUnsigned(this.AddUnsigned(this.I(e,r,i),n),s)),this.AddUnsigned(this.RotateLeft(t,o),e)},t.ConvertToWordArray=function(t){for(var e,r=t.length,i=r+8,n=16*((i-i%64)/64+1),o=Array(n-1),s=0,a=0;a<r;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[n-2]=r<<3,o[n-1]=r>>>29,o},t.WordToHex=function(t){var e,r="",i="";for(e=0;e<=3;e++)r+=(i="0"+(t>>>8*e&255).toString(16)).substr(i.length-2,2);return r},t.Utf8Encode=function(t){var e,r="";t=t.replace(/\r\n/g,"\n");for(var i=0;i<t.length;i++)(e=t.charCodeAt(i))<128?r+=String.fromCharCode(e):e>127&&e<2048?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128));return r},t.init=function(t){for("string"!=typeof t&&(t=JSON.stringify(t)),this._string=this.Utf8Encode(t),this.x=this.ConvertToWordArray(this._string),this.a=1732584193,this.b=4023233417,this.c=2562383102,this.d=271733878,this.k=0;this.k<this.x.length;this.k+=16)this.AA=this.a,this.BB=this.b,this.CC=this.c,this.DD=this.d,this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k],this.S11,3614090360),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+1],this.S12,3905402710),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S13,606105819),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+3],this.S14,3250441966),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S11,4118548399),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+5],this.S12,1200080426),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S13,2821735955),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+7],this.S14,4249261313),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S11,1770035416),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+9],this.S12,2336552879),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S13,4294925233),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+11],this.S14,2304563134),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S11,1804603682),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+13],this.S12,4254626195),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S13,2792965006),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+15],this.S14,1236535329),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S21,4129170786),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+6],this.S22,3225465664),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S23,643717713),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k],this.S24,3921069994),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S21,3593408605),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+10],this.S22,38016083),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S23,3634488961),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+4],this.S24,3889429448),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S21,568446438),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+14],this.S22,3275163606),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S23,4107603335),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+8],this.S24,1163531501),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S21,2850285829),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+2],this.S22,4243563512),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S23,1735328473),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+12],this.S24,2368359562),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S31,4294588738),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+8],this.S32,2272392833),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S33,1839030562),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+14],this.S34,4259657740),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S31,2763975236),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+4],this.S32,1272893353),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S33,4139469664),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+10],this.S34,3200236656),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S31,681279174),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k],this.S32,3936430074),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S33,3572445317),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+6],this.S34,76029189),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S31,3654602809),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+12],this.S32,3873151461),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S33,530742520),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+2],this.S34,3299628645),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k],this.S41,4096336452),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+7],this.S42,1126891415),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S43,2878612391),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+5],this.S44,4237533241),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S41,1700485571),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+3],this.S42,2399980690),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S43,4293915773),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+1],this.S44,2240044497),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S41,1873313359),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+15],this.S42,4264355552),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S43,2734768916),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+13],this.S44,1309151649),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S41,4149444226),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+11],this.S42,3174756917),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S43,718787259),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+9],this.S44,3951481745),this.a=this.AddUnsigned(this.a,this.AA),this.b=this.AddUnsigned(this.b,this.BB),this.c=this.AddUnsigned(this.c,this.CC),this.d=this.AddUnsigned(this.d,this.DD);return(this.WordToHex(this.a)+this.WordToHex(this.b)+this.WordToHex(this.c)+this.WordToHex(this.d)).toLowerCase()},t.x=Array(),t.S11=7,t.S12=12,t.S13=17,t.S14=22,t.S21=5,t.S22=9,t.S23=14,t.S24=20,t.S31=4,t.S32=11,t.S33=16,t.S34=23,t.S41=6,t.S42=10,t.S43=15,t.S44=21,t.RotateLeft=function(t,e){return t<<e|t>>>32-e},t.F=function(t,e,r){return t&e|~t&r},t.G=function(t,e,r){return t&r|e&~r},t.H=function(t,e,r){return t^e^r},t.I=function(t,e,r){return e^(t|~r)},t}();Z();function Ot(){var t=getCurrentPages()||"";return t[t.length-1]||""}function Tt(t){var e="/";try{var r=Ot();if(!r)return r;var i,n=r.route,o=r.options||{};for(var s in i=r.options||{},e=n+"?",o){if("share"!==t||"txsrShareInfoSdk"!==s)if(K(s))if(i[s])e+=s+"="+o[s]+"&"}e=e.substring(0,e.length-1)}catch(t){console.error("getCurrentPageUrlWithArgs error",t)}return e}function Rt(t){try{var e=Ot();if(!e)return e;e.options;return(e.options||{})[t]||""}catch(t){console.error("getCurrentPageKey error",t)}return"/"}function Et(){var t=Ot();try{var e=__wxConfig.global.window.navigationBarTitleText;return(t?(__wxConfig.page[t.route+".html"].window||{}).navigationBarTitleText:"")||e||"\u672a\u77e5"}catch(t){}return"\u672a\u77e5"}function Pt(){return"devtools"===function(){try{return"undefined"==typeof __wxConfig?"":__wxConfig.platform}catch(t){console.error("getEnv failed: ",t)}return""}()}function Ut(t,e,i){try{var n=t[0],o=void 0===n?{}:n;if(o)switch(o.type){case"tap":case"longpress":case"longtap":case"confirm":var s=(o.currentTarget||{}).dataset,a=void 0===s?{}:s;0==Object.keys(a).length&&(a=o.target.dataset);var h=this||{},c=h.is,u=void 0===c?"":c;h.data;e("element",r({is_sdk_auto_track:!0,is:u,type:o.type,element_id:"#"+i},a))}}catch(t){console.error("elementEventTrack error",t)}}function qt(){var t,e=(Ot()||{}).route||"";try{t=global.cacheManager.getSync($)}catch(t){console.error("CacheManager.get error",t)}var r=t||{},i=r.local_id,n=r.txsr_from_share_info,o=void 0===n?{}:n,s=o.mi,a=void 0===s?"":s,h=o.d,c=void 0===h?0:h,u=o.o,f=void 0===u?"":u,l=At.init(i+e),d=""!==a&&l===a?c:c+1;return a=At.init(i+e),0===c&&(f=a),console.log("ooooo",f,c),JSON.stringify({mi:a,d:d,o:f})}function Dt(t){return["qqFriends","qzone","frist","friends","timeline","recentContact"][parseInt(t)]||"friends"}var Ft="";try{Ft="1.8.3-beta.2"}catch(t){}var Mt=function(){function t(){var t=this;this.env="production",this.inited=!1,this.option={},this.__context={idenTifier:"-------"},this.idenTifierChanArr=ht,this.idenTifierUserArr=ct,this.reportState=et,this.needCheckUrlInfo=[],this.autoProxyData={},this.remoteConfigInfo={masterSwitch:!0,isOpenProxyWxApi:!1},this.openTrack=function(){var t=this;this.checkFallback(),this.option.autoStart&&this.startReport(),setTimeout((function(){t.trackLogEvents()}),999)},this.initRemoteConfig=function(){try{var t=this;wx.request({url:"https://zhls.qq.com/open/sdk?token="+this.option.token,data:{},header:{"content-type":"json"},success:function(e){try{var r=e.data;if(t.remoteConfigInfo=H(t.remoteConfigInfo,r),t.track("sdk_config_info",{_sdk_config_info:t.remoteConfigInfo}),!t.remoteConfigInfo.masterSwitch)return;t.openTrack(),t.remoteConfigInfo.isOpenProxyWxApi&&t.openProxyWxApi()}catch(e){t.track("sdk_error_log",{_sdk_error_log:{message:"request proxyConfig success",type:nt,error:e.message}}),t.openTrack()}},fail:function(e){console.log("request proxyConfig error\uff1a",e),t.track("sdk_error_log",{_sdk_error_log:{message:"request proxyConfig fail, url: https://zhls.qq.com/open/sdk?token="+t.option.token,type:nt,error:e.errMsg}}),t.openTrack()}})}catch(t){console.log("request proxyConfig error\uff1a",t),this.track("sdk_error_log",{_sdk_error_log:{message:"request proxyConfig error, url: https://zhls.qq.com/open/sdk?token="+this.option.token,type:nt,error:t.message}}),this.openTrack()}},this.openProxyWxApi=function(){var t=this;try{var e=r({},this.remoteConfigInfo);if(delete e.masterSwitch,delete e.isOpenProxyWxApi,!Object.keys(e).length)return;Object.keys(e).forEach((function(r){t.autoProxyData[r]={},e[r].forEach((function(e){t.autoProxyData[r][e.name]={_sr_track_url:"",_sr_track_body:""},e.value.forEach((function(i){t.needCheckUrlInfo.push({name:e.name,url:i.url,eventName:r,grabLocation:i.grabLocation})}))}))}))}catch(t){this.track("sdk_error_log",{_sdk_error_log:{message:"openProxyWxApi error",type:nt,error:t.message}}),console.warn("SDK\u4e0b\u53d1\u914d\u7f6e\u63a5\u53e3\u62a5\u9519\uff1a",t)}},this.hackAutoTrack=function(){var t=this;vt({success:function(e,r){t.remoteConfigInfo.isOpenProxyWxApi&&t.checkRequestUrl(r.url).forEach((function(i){var n;if("request"===i.grabLocation){var o=function(t){var e="";void 0===t?e=decodeURI(location.search):t.split("?").length>1&&(e="?"+t.split("?")[1]);var r=new Object;if(-1!=e.indexOf("?"))for(var i=e.substr(1).split("&"),n=0;n<i.length;n++)r[i[n].split("=")[0]]=decodeURI(i[n].split("=")[1]);return r}(r.url);n=H(o,r.data)}else n=e.data;t.autoProxyData[i.eventName][i.name]._sr_track_body=n,t.autoProxyData[i.eventName][i.name]._sr_track_url=i.url,t.ckObjectFullFill(i.eventName)&&("custom_order"==i.eventName?t.track(i.eventName,{is_sdk_auto_track:!0,_auto_proxy_data:t.formatAutoData(i.eventName),order:{order_time:Number((new Date).getTime()),order_status:"give_order"}}):(t.track(i.eventName,{is_sdk_auto_track:!0,_auto_proxy_data:t.formatAutoData(i.eventName)}),t.clearProxyData(i.eventName)))}))}},this.track.bind(this)),wt({onStart:function(){t.remoteConfigInfo.isOpenProxyWxApi&&(t.ckObjectFullFill("custom_order")?t.track("custom_order",{is_sdk_auto_track:!0,_auto_proxy_data:t.formatAutoData("custom_order"),order:{order_time:Number((new Date).getTime()),order_status:"pay"}}):t.track("sdk_error_log",{_sdk_error_log:{message:"custom_order error",type:at,error:"Incomplete order"}}))},success:function(){t.remoteConfigInfo.isOpenProxyWxApi&&t.ckObjectFullFill("custom_order")&&(t.track("custom_order",{is_sdk_auto_track:!0,_auto_proxy_data:t.formatAutoData("custom_order"),order:{order_time:Number((new Date).getTime()),order_status:"payed"}}),t.clearProxyData("custom_order"))},fail:function(){t.remoteConfigInfo.isOpenProxyWxApi&&t.ckObjectFullFill("custom_order")&&t.track("custom_order",{is_sdk_auto_track:!0,_auto_proxy_data:t.formatAutoData("custom_order"),order:{order_time:Number((new Date).getTime()),order_status:"cancel_pay"}})}},this.track.bind(this))},this.clearProxyData=function(t){var e=this,r=Object.keys(this.autoProxyData[t]);0!==r.length&&r.forEach((function(r){try{e.autoProxyData[t][r]._sr_track_url="",e.autoProxyData[t][r]._sr_track_body=""}catch(t){e.track("sdk_error_log",{_sdk_error_log:{message:"clearProxyData error",type:nt,error:t.message}}),console.log("clearProxyData error",t)}}))},this.ckObjectFullFill=function(t){var e=this;if(void 0===this.autoProxyData[t])return!1;var r=Object.keys(this.autoProxyData[t]);if(0===r.length)return!1;var i=!0;return r.forEach((function(r){try{""==e.autoProxyData[t][r]._sr_track_body&&(i=!1)}catch(t){e.track("sdk_error_log",{_sdk_error_log:{message:"ckObjectFullFill error",type:nt,error:t.message}}),console.log("error ckObjectFullFill",t)}})),i},this.checkRequestUrl=function(t){var e=[];return this.needCheckUrlInfo.forEach((function(i){t.includes(i.url)&&e.push(r({},i))})),e},this.formatAutoData=function(t){var e=this,i=r({},this.autoProxyData[t]);return Object.keys(i).forEach((function(t){try{i[t]=M.encode(JSON.stringify(i[t]))}catch(t){e.track("sdk_error_log",{_sdk_error_log:{message:"formatAutoData error",type:nt,error:t.message}}),console.log("error formatAutoData",t)}})),i},this.triggerFlush=G((function(){t.checkAndUpload()}),1e3),this.eventDataFmatter=function(e){var i=+new Date,n=t.getPageInfo();if(void 0!==t._onQueue){var o=t._onQueue(e);j(e)?e=o:console.warn("eventDataFmatter should return Object type")}return r(r(r({},n),e),{time:i})},this.checkRequiredOptionItem=function(){return!!t.option.token||(t.option.skipTokenCheck?(console.warn("token \u672a\u914d\u7f6e\uff0c\u5df2\u8df3\u8fc7\u8be5\u68c0\u67e5"),!0):(console.error("sdk.init - Option \u5fc5\u8981\u53c2\u6570\u914d\u7f6e\u7f3a\u5931\uff0c\u8bf7\u68c0\u67e5"),!1))},this.checkVersionInfo=function(){if(t.setContext({sr_sdk_version:t.version},1),t.isDev()){var e="https://mp.zhls.qq.com/sdk/sr-sdk-version-info.json?timesamp="+Date.now();return t.request({},{url:e,method:"GET"}).then((function(e){var r=(e.data||{})[t.name],i=!0;if(r)return t.version&&(1===B(r.version.min,t.version)?(console.error("\u5f53\u524dSDK\u7248\u672c\u8fc7\u4f4e, \u8bf7\u5347\u7ea7\uff01"),i=!1):1===B(r.version.max,t.version)&&console.warn("\u5f53\u524dSDK\u6709\u66f4\u65b0, \u63a8\u8350\u5347\u7ea7\uff01")),{success:i,data:r,msg:""}})).catch((function(t){return void 0===t&&(t={}),{success:!1,data:void 0,msg:t.errMsg}}))}},this.eventStorageInitialize=function(){return new R(t.cacheManager)},this.queueInitialize=function(){var e=t.getServerUrl();return t.queue=new ut({beforeAddQueue:function(e){return t.log_id+=1,t.setCache(Y,{last_tracking_id:t.tracking_id,last_max_log_id:t.log_id}),r(r({},e),{from:"sr-sdk-wxapp",tracking_id:t.tracking_id,log_id:t.log_id,ext_uniq_id:N()})},request:function(i){return t.request(i.events,{url:e,method:"POST"}).catch((function(t){return console.error("APICaller error",t),"request:fail url not in domain list"===t.msg?r(r({},t),{success:!0}):t}))},storage:t.eventStorageInitialize()}),!0},this.trackLogEvents=function(){var e=t.getCache(Y)||{};e.last_max_log_id&&t.track("logid_events",e)},this.tracking_id=N(),this.log_id=-1,this.checkStaticMethods()}return Object.defineProperty(t.prototype,"context",{get:function(){return this.__context},set:function(t){this.__context=t;var e=this.cacheManager.getSync(X);e?e[0][0]!==this.tracking_id?(e.unshift([this.tracking_id,t]),e.length>5&&(e.length=5)):e[0][1]=t:e=[[this.tracking_id,t]],this.cacheManager.setSync(X,e)},enumerable:!1,configurable:!0}),t.prototype.init=function(t){if(this.inited)return this;if(this.version=Ft||"",this.option=H(this.defaultOptions,this.option,t),t.autoProxy&&(this.option.proxyComponent=!0,this.option.proxyPage=!0,this.option.openAutoTrackOpenId=!0,this.option.openAutoTrackUnionId=!0,this.option.autoTrack=!0,this.option.openSdkShareDepth=!0),!this.checkRequiredOptionItem())return this;this.cacheManager=T(this.env),"object"==typeof global&&(global.cacheManager=this.cacheManager);try{this.proxyInitialize()}catch(t){this.errorHandle(t)}var e;return this.queueInitialize(),this.contextInitialize(),this.inited=!0,this.checkVersionInfo(),this.initRemoteConfig(),this.hackAutoTrack(),this.option.openErrorMonitoring&&(e=this.track.bind(this),yt.onError((function(t){t&&e("sdk_error_log",{_sdk_error_log:{message:"JS_RUN_ERROR",type:ot,error:t}})})),vt({complete:function(t,r){var i=t.errMsg,n=t.statusCode,o=t.data,s="";i.indexOf("timeout")>-1?s="timeout":i.indexOf("fail")>-1?s="failed":n?n<0?s="failed":n>=400&&(s="error"):s="failed",s&&e("sdk_error_log",{_sdk_error_log:{message:"AJAX_ERROR",type:st,error:{AJAX_ERROR:"request "+s,resStatus:n||0,resDuration:Date.now()-r.requestStartTime,resData:Q(o),reqUrl:r.url,reqMethod:r.method||"get",reqParam:Q(r.data),errMsg:i.slice(0,1e3)}}})}},e)),this},t.prototype.track=function(t,e){if(this.remoteConfigInfo.masterSwitch){var r=this.option.debug;JSON.stringify(e||{}).length>5e3&&console.warn("\u76d1\u6d4b\u5230\u8d85\u8fc75000\u7684\u4e0a\u62a5\u65e5\u5fd7\uff1a"+t);var i=this.eventDataFmatter(e);return r&&console&&"function"==typeof console.log&&console.log("\u3010Track\u3011 "+t,i),this.queue.add({type:t,props:i}),this.queue.checkQueue(),(this.queue.getItems().length||0)>9&&this.reportState===rt?this.flush():this.triggerFlush(),this}},t.prototype.setContext=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=!1),console.warn("setContext \u4e0d\u5728\u63a8\u8350\u4f7f\u7528\uff0c\u8bf7\u7528\u66f4\u8f7b\u4fbf\u7684 setUser\u3001setChan\u7b49\u65b9\u6cd5\u4ee3\u66ff"),i&&this.flush(),void 0!==t.sr_sdk_version&&0===e&&delete t.sr_sdk_version,this.context=r(r(r({},this.context),t),{wx_user:r(r({},this.context.wx_user),t.wx_user||{}),chan:r(r({},this.context.chan),t.chan||{})}),this.setIdenTifier({value:r({},t),type:"context",isSr:e}),this},t.prototype.setUser=function(t,e,i){return void 0===t&&(t={}),void 0===e&&(e=0),void 0===i&&(i=!1),i&&this.flush(),this.context=Object.assign({},this.context,{wx_user:r(r({},this.context.wx_user),t)}),this.setIdenTifier({value:r({},t),type:"user",isSr:e}),this.setCache($,this.context.wx_user),this},t.prototype.setChan=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),i&&this.flush();var n=t.chan_id,o=(this.context.chan||{}).chan_id;return this.context=Object.assign({},this.context,{chan:r(r(r({},this.context.chan),t),{chan_id:n||(o||"")})}),this.setIdenTifier({value:r({},t),type:"chan",isSr:e}),this},t.prototype.setComponent=function(t){var e=t.component_id,i=t.component_name;return this.context=Object.assign({},this.context,{component:r(r({},t),{component_id:e,component_name:i})}),this},t.prototype.clearComponent=function(){return delete this.context.component,this},t.prototype.setActivityInfo=function(t){var e=t.activity_id,i=t.activity_name,n=t.activity_type,o=t.activity_index;return this.context=Object.assign({},this.context,{activity_info:r(r({},t),{activity_id:e,activity_name:i,activity_type:n,activity_index:o})}),this},t.prototype.clearActivityInfo=function(){return delete this.context.activity_info,this},t.prototype.startReport=function(){return this.reportState=rt,this.triggerFlush(),this},t.prototype.resumeReport=function(){return this.queue.resumeUnSendData(),this.reportState===it&&(this.reportState=rt),this.triggerFlush(),this},t.prototype.pauseReport=function(){return this.reportState=it,this},t.prototype.flush=function(){var t=this.getCache(X).reduce((function(t,e){return t[e[0]]=e[1],t}),{});return this.queue.flush(t),this},t.prototype.onQueue=function(t){return this._onQueue=t,this},t.prototype.getInfo=function(){var t={option:this.option,tracking_id:this.tracking_id,context:this.context,is_dev:this.isDev()};return"SR_SDK_INFO="+M.encode(JSON.stringify(t))},t.prototype.getLocalId=function(){return this.context.wx_user.local_id||""},t.prototype.getWxUserInfo=function(){return r({},this.context.wx_user)},t.prototype.getChanInfo=function(){return r({},this.context.chan)},t.prototype.getPagePathInfo=function(){return Tt()||""},t.prototype.checkStaticMethods=function(){if("development"===this.env)try{var t=this.constructor;["create"].forEach((function(e){!t[e]&&console.error("static "+e+" should be implement")}))}catch(t){console.error("checkStaticMethods error",t)}},t.prototype.checkFallback=function(){var t=this;setTimeout((function(){t.checkAndUpload(),t.checkFallback()}),1e4)},t.prototype.checkAndUpload=function(){this.reportState===rt&&this.flush()},t.prototype.contextInitialize=function(){var t=this.getUser(),e=this.getSystemInfo(),i=e.brand,n=e.model,o=e.version,s=e.environment,a=e.screenWidth,h=e.screenHeight,c=e.system,u=e.platform,f=e.SDKVersion,l=e.benchmarkLevel,d=e.locationReducedAccuracy,p=this.getFrameworkInfo();this.context=H(this.context,{wx_user:r(r({},t),{app_id:this.option.appid}),system_info:{brand:i,model:n,version:o,environment:s,screenWidth:a,screenHeight:h,system:c,platform:u,SDKVersion:f,benchmarkLevel:l,LRA:d},framework_info:p,chan:{}}),this.setIdenTifier({value:{app_id:this.option.appid},type:"user",isSr:1})},t.prototype.rleitrValue=function(t,e,r){var i=t.split("");return i[e]=r,i.join("")},t.prototype.setuserchanItr=function(t,e,r){var i=this,n=this.context[tt]||"-----";Object.keys(t).forEach((function(t,o){"user"===e&&-1!==i.idenTifierUserArr.indexOf(t)&&(i.context[tt]=i.rleitrValue(n,i.idenTifierUserArr.indexOf(t),r)),"chan"===e&&-1!==i.idenTifierChanArr.indexOf(t)&&(i.context.idenTifier=i.rleitrValue(i.context.idenTifier,i.idenTifierChanArr.indexOf(t),r))}))},t.prototype.setcontextItr=function(t,e){t.wx_user&&this.setuserchanItr(r({},t.wx_user),"user",e),t.chan&&this.setuserchanItr(r({},t.chan),"chan",e),delete t.wx_user,delete t.chan,this.setuserchanItr(r({},t),"chan",e)},t.prototype.setIdenTifier=function(t){var e=t.value,r=t.type,i=t.isSr;switch(r){case"context":this.setcontextItr(e,i);break;default:this.setuserchanItr(e,r,i)}},t.prototype.getUser=function(){var t=this.context.wx_user||this.getCache($)||{};return t.local_id&&50===t.local_id.length||(t={local_id:N()},this.setIdenTifier({value:r({},t),type:"user",isSr:1}),this.setCache($,t)),t},t.prototype.getCache=function(t){return this.cacheManager.getSync(t)},t.prototype.setCache=function(t,e){this.cacheManager.setSync(t,e)},t.prototype.getServerUrl=function(){var t="";return t="function"==typeof this.option.serverUrl?this.option.serverUrl.call(this):this.option.serverUrl||"https://zhls.qq.com/api/report",t+="?token="+this.option.token},t.prototype.getTrackingId=function(){return this.tracking_id},i([Ct],t.prototype,"init",null),i([Ct,It],t.prototype,"track",null),i([Ct,It],t.prototype,"setContext",null),i([Ct,It],t.prototype,"setUser",null),i([Ct,It],t.prototype,"setChan",null),i([Ct,It],t.prototype,"setComponent",null),i([Ct,It],t.prototype,"clearComponent",null),i([Ct,It],t.prototype,"setActivityInfo",null),i([Ct,It],t.prototype,"clearActivityInfo",null),i([Ct,It],t.prototype,"startReport",null),i([Ct,It],t.prototype,"resumeReport",null),i([Ct,It],t.prototype,"pauseReport",null),i([Ct,It],t.prototype,"flush",null),i([Ct,It],t.prototype,"onQueue",null),i([Ct,It],t.prototype,"getInfo",null),i([Ct,It],t.prototype,"getLocalId",null),i([Ct,It],t.prototype,"getWxUserInfo",null),i([Ct,It],t.prototype,"getChanInfo",null),i([Ct,It],t.prototype,"getPagePathInfo",null),t}();function jt(t,e,r,i){void 0===i&&(i=!1);var o=t[e];t[e]=function(){for(var t=arguments,e=this,s=[],a=0;a<arguments.length;a++)s[a]=t[a];var h=function(){return o&&o.apply(e,s)};return i&&(h=function(){return Promise.resolve().then((function(){return o.apply(e,s)}))}),r.apply(this,n([h],s))}}var Lt=function(){},Gt={},Nt={},Ht=function(){return(new Date).getTime()};var Kt=function(t,e,r,i,n){return function(o){return function(t,e,r,i,n,o){if(jt(t,"onLoad",(function(t,e){t(),this.lauchTime=Ht()})),jt(t,"onShow",(function(t){var i=this,n=function(){i.showTime=Ht();var t=Rt.call(i,"room_id")||Rt.call(i,"roomId")||Rt.call(i,"roomid");t&&r({room_id:t},1),e("browse_wxapp_page",{is_sdk_auto_track:!0,refer_page:Nt.route,is_newly_open:!Gt[i.route]}),Gt[i.route]=!0};t().then(n).catch(n)}),!0),jt(t,"onHide",(function(t){t();var r=this.showTime?Ht()-this.showTime:0;r=r>144e5?0:r,this.showTime=0,e("leave_wxapp_page",{is_sdk_auto_track:!0,refer_page:Nt.route,stay_time:r}),Nt=this,i({refer_page:this.route})})),jt(t,"onUnload",(function(t){t();var r=this.showTime?Ht()-this.showTime:0;r=r>144e5?0:r,e("leave_wxapp_page",{is_sdk_auto_track:!0,refer_page:Nt.route,stay_time:r}),Nt=this,i({refer_page:this.route})})),jt(t,"onPullDownRefresh",(function(t){t(),e("page_pull_down_refresh",{is_sdk_auto_track:!0})})),jt(t,"onReachBottom",(function(t){t(),e("page_reach_bottom",{is_sdk_auto_track:!0})})),"function"==typeof t.onShareAppMessage){var s=t.onShareAppMessage||Lt;if(t.onShareAppMessage=function(t){void 0===t&&(t={});var r=s.call(this,t)||{};try{var i=r.path||Tt.call(this,"share");-1===i.indexOf("?")?i+="?":"&"!==i.slice(-1)&&(i+="&");var n=void 0,a=void 0;o&&(n=qt(),a=JSON.parse(n),i=i+"txsrShareInfoSdk="+encodeURIComponent(n)),e("page_share_app_message",{is_sdk_auto_track:!0,from_type:t.from||"\u672a\u77e5",share_to:Dt(t.shareTarget),share_path:i,share_title:r.title,share_image_url:r.imageUrl,refer_page:Nt.route,txsr_share_info_sdk:a}),r.path=i}catch(t){console.error("onShareAppMessage error",t)}return r},"function"==typeof t.onShareTimeline){var a=t.onShareTimeline||Lt;t.onShareTimeline=function(t){void 0===t&&(t={});var r=a.call(this,t)||{};try{var i=r.path||Tt.call(this,"share"),n=r.query||"";-1===i.indexOf("?")?i+="?":"&"!==i.slice(-1)&&(i+="&");var s=void 0,h=void 0;o&&(s=qt(),h=JSON.parse(s),i=i+"txsrShareInfoSdk="+encodeURIComponent(s)),e("page_share_app_message",{is_sdk_auto_track:!0,from_type:t.from||"\u672a\u77e5",share_to:"timeline",query:n,share_path:i,share_title:r.title,share_image_url:r.imageUrl,refer_page:Nt.route,txsr_share_info_sdk:h}),r.path=i}catch(t){console.error("onShareAppMessage error",t)}return r}}}return n&&Object.entries(t).filter((function(t){var e=t[0];t[1];return!["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onPageScroll","onShareAppMessage","onResize","onTabItemTap"].includes(e)})).forEach((function(r){var i=r[0];"function"==typeof r[1]&&jt(t,i,(function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return Ut.call(this,n,e,i),t()}))})),t}(o,t,e,r,i,n)}},zt=function(){},Wt={},Jt={},Vt=function(){return(new Date).getTime()};var Bt=function(t,e,r,i,n){return function(o){return function(t,e,r,i,n,o){try{if(t.methods=t.methods||{},jt(t.methods,"onLoad",(function(t,e){t(),this.lauchTime=Vt()})),jt(t.methods,"onShow",(function(t){var i=this,n=function(){i.showTime=Vt();var t=Rt.call(i,"room_id")||Rt.call(i,"roomId")||Rt.call(i,"roomid");t&&r({room_id:t},1),e("browse_wxapp_page",{is_sdk_auto_track:!0,refer_page:Jt.route,is_newly_open:!Wt[i.route]}),Wt[i.route]=!0};t().then(n).catch(n)}),!0),jt(t.methods,"onUnload",(function(t){t();var r=this.showTime?Vt()-this.showTime:0;r=r>144e5?0:r,e("leave_wxapp_page",{is_sdk_auto_track:!0,refer_page:Jt.route,stay_time:r}),Jt=this,i({refer_page:this.route})})),jt(t.methods,"onPullDownRefresh",(function(t){t(),e("page_pull_down_refresh",{is_sdk_auto_track:!0})})),jt(t.methods,"onReachBottom",(function(t){t(),e("page_reach_bottom",{is_sdk_auto_track:!0})})),jt(t.methods,"onHide",(function(t){t();var r=this.showTime?Vt()-this.showTime:0;r=r>144e5?0:r,this.showTime=0,e("leave_wxapp_page",{is_sdk_auto_track:!0,refer_page:Jt.route,stay_time:r}),Jt=this,i({refer_page:this.route})})),"function"==typeof t.methods.onShareAppMessage){var s=t.methods.onShareAppMessage||zt;if(t.methods.onShareAppMessage=function(t){void 0===t&&(t={});var r=s.call(this,t)||{};try{var i=r.path||Tt.call(this,"share");-1===i.indexOf("?")?i+="?":"&"!==i.slice(-1)&&(i+="&");var n=void 0,a=void 0;o&&(n=qt(),a=JSON.parse(n),i=i+"txsrShareInfoSdk="+encodeURIComponent(n)),e("page_share_app_message",{is_sdk_auto_track:!0,from_type:t.from||"\u672a\u77e5",share_to:"friends",share_path:i,share_title:r.title,share_image_url:r.imageUrl,refer_page:Jt.route,txsr_share_info_sdk:a}),r.path=i}catch(t){console.error("onShareAppMessage error",t)}return r},"function"==typeof t.methods.onShareTimeline){var a=t.methods.onShareTimeline||zt;t.methods.onShareTimeline=function(t){void 0===t&&(t={});var r=a.call(this,t)||{};try{var i=r.path||Tt.call(this,"share"),n=r.query||"";-1===i.indexOf("?")?i+="?":"&"!==i.slice(-1)&&(i+="&");var s=void 0,h=void 0;o&&(s=qt(),h=JSON.parse(s),i=i+"txsrShareInfoSdk="+encodeURIComponent(s)),e("page_share_app_message",{is_sdk_auto_track:!0,from_type:t.from||"\u672a\u77e5",share_to:Dt(t.shareTarget),share_path:i,query:n,share_title:r.title,share_image_url:r.imageUrl,refer_page:Jt.route,txsr_share_info_sdk:h}),r.path=i}catch(t){console.error("onShareAppMessage error",t)}return r}}}t.methods&&n&&Object.entries(t.methods).filter((function(t){var e=t[0];t[1];return!["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onPageScroll","onShareAppMessage","onResize","onTabItemTap","observer"].includes(e)})).forEach((function(r){var i=r[0];"function"==typeof r[1]&&jt(t.methods,i,(function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return Ut.call(this,n,e,i),t()}))}))}catch(t){console.error("componentProxy error",t)}return t}(o,t,e,r,i,n)}},Qt=["utf8","utf-8","unicode-1-1-utf-8"];for(var Zt=new Uint8Array(256),Xt=0;Xt<Zt.length;++Xt)Zt[Xt]=Xt;var $t=new function(t){if(Qt.indexOf(t)<0&&void 0!==t&&null!=t)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(t){if("string"!=typeof t)throw new TypeError("passed argument must be of tye string");for(var e=unescape(encodeURIComponent(t)),r=new Uint8Array(e.length),i=e.split(""),n=0;n<i.length;n++)r[n]=i[n].charCodeAt(0);return r}}("utf-8");function Yt(){}Yt.prototype.encrypt=function(t,e){return function(t,e){for(var r,i=t.length,n=new Uint8Array(i),o=0,s=0,a=0;a<i;++a)s=s+e[o=o+1&255]&255,r=e[o],e[o]=e[s],e[s]=r,n[a]=t[a]^e[e[o]+e[s]&255];return n}($t.encode(t),function(t){for(var e=new Uint8Array(256),r=0;r<256;++r)e[r]=r;var i,n=0;for(r=0;r<256;++r)n=n+e[r]+t[r%t.length]&255,i=e[r],e[r]=e[n],e[n]=i;return e}($t.encode(e)))};var te=new Yt,ee={},re=function(t){return t},ie=Z(),ne=function(t){function i(){var e=t.call(this)||this;return e.name="mp",e.component=re,e.page=re,e.proxySetNavigation=function(){try{var t=ie.setNavigationBarTitle;Object.defineProperty(ie,"setNavigationBarTitle",{get:function(){return function(e){void 0===e&&(e={});try{var r=Ot();try{__wxConfig.page=__wxConfig.page||{}}catch(t){console.error(t)}var i=__wxConfig.page[r.route+".html"];i&&((i.window||{}).navigationBarTitleText=e.title)}catch(t){}t.call(this,e)}}})}catch(t){console.warn("proxySetNavigation failed",t)}},e.request=function(t,r){try{var i=function(t){return void 0===t&&(t={}),0===t.code};"function"==typeof e.option.onUploaded&&(i=e.option.onUploaded);var n=N(),o=te.encrypt(JSON.stringify(t),n),s=D.uint8ArrayToBase64(o);return new Promise((function(t,e){ie.request({url:r.url,method:r.method||"POST",data:s,header:{"Content-Type":"application/x-sr-encrypted","Content-Encrypting-Key":n},success:function(e){void 0===e&&(e={});var r=e.data,n=void 0===r?{}:r,o=i(n);t({success:void 0===o||o,data:n.data||n,msg:n.errMsg})},fail:function(t){e({success:!1,data:void 0,msg:t.errMsg})}})}))}catch(t){console.log("sdk request error",t)}},e.defaultOptions={autoProxy:!1,autoStart:!0,debug:!1,usePlugin:!1,proxyPage:!1,proxyComponent:!1,autoTrack:!1,trackApp:!0,openSdkShareDepth:!1,installFrom:"",openAutoTrackOpenId:!1,openAutoTrackUnionId:!1,openErrorMonitoring:!1},e.proxySetNavigation(),e}return e(i,t),i.prototype.proxyInitialize=function(){return ne.options=this.option,this.trackApp(),!0},i.prototype.trackApp=function(){var t=this,e=!1;ie.onAppShow((function(i){void 0===i&&(i={});var n=i,o=n.query,s=void 0===o?{}:o,a=n.path,h=n.shareTicket,c=t.option.openSdkShareDepth,u=t.option.openAutoTrackOpenId,f=t.option.openAutoTrackUnionId,l=t.option.appid,d=function(t){void 0===t&&(t={});var e={};if(t.scene){try{var i=decodeURIComponent(t.scene);(i=i.replace("?","").trim()).split("&").map((function(t){if(t){var r=t.split("="),i=r[0],n=r[1];K(i)&&(e[i]=void 0===n||n)}}))}catch(t){console.error(t)}t=r(r({},t),e)}return t}(s||{}),p=d.txsrShareInfoSdk||"{}",g=t;if(d&&"{}"!==JSON.stringify(d)){var v="?";Object.entries(d).forEach((function(t,e){var r=t[0],i=t[1];v+=(0===e?"":"&")+r+"="+i})),a+=v}if(t.setChan(r(r({},d),{chan_wxapp_scene:i.scene,chan_refer_app_id:(i.referrerInfo||{}).appId}),1),d.chan_id&&t.setChan({chan_id:d.chan_id},1),c&&"{}"!==p)try{t.setUser({txsr_from_share_info:JSON.parse(decodeURIComponent(p))},1)}catch(t){}e||(e=!0,t.option.trackApp&&t.track("app_launch",{is_sdk_auto_track:!0,page:a}));var y=t.cacheManager.getSync($)||{}||{},_=y.open_id,m=void 0===_?"":_,x=y.union_id;if(u&&!m||f&&!(void 0===x?"":x))try{ie.login({success:function(t){var e=t.code;ie.request({url:"https://zhls.qq.com/wxlogin/getOpenId?appid="+l+"&js_code="+e,data:{},header:{"content-type":"json"},success:function(t){var e=t.data,r=e.openId,i=e.unionId,n=void 0===i?"":i;g.setUser({open_id:r,union_id:n},1),c&&h&&r&&g.getOpenGId(h,r)}})}})}catch(e){t.errorHandle(e)}c&&h&&m&&t.getOpenGId(h,m),t.option.trackApp&&t.track("app_show",{is_sdk_auto_track:!0,page:a})})),ie.onAppHide((function(){t.option.trackApp&&t.track("exit_wxapp",{is_sdk_auto_track:!0})}))},i.prototype.getOpenGId=function(t,e){var r=this.option.appid,i=this;ie.getShareInfo({shareTicket:t,success:function(t){var n=t.iv,o=t.encryptedData;ie.request({url:"https://zhls.qq.com/wxlogin/convertData",data:{appid:r,openid:e,data:o,iv:n},header:{"content-type":"json"},success:function(t){var e=(t&&t.data).openGId;e&&i.setChan({openGId:e},1)}})},fail:function(t){}})},i.prototype.errorHandle=function(t){try{var e=this.getServerUrl();this.request({type:"sdk api exec error",props:{sr_sdk_version:this.version,system_info:this.getSystemInfo(),framework_info:this.getFrameworkInfo(),message:t,stack:t}},{url:e,method:"POST"})}catch(t){console.log("errorHandle error",t)}},i.prototype.getSystemInfo=function(){try{return ie.getSystemInfoSync()}catch(t){return{}}},i.prototype.getFrameworkInfo=function(){var t,e;try{if(process&&process.env&&process.env.TARO_ENV&&(t="taro"),this.option.installFrom){var r=String(this.option.installFrom).toLowerCase(),i=/^((taro)|(uni[\-]?app)|(chameleon)|(wepy)|(mpvue))(@v?([\S]*))?/g.exec(r);i&&i[1]&&("taro"===t&&i[2]?e=i[8]:"taro"!==t&&(e=i[8],t=i[3]?"uni-app":i[4]||i[5]||i[6]||"unknown"))}}catch(e){t="unknown"}return{framework:t,version:e}},i.prototype.getPageInfo=function(){var t=Tt(),e=Ot()||{},r=Et,i=(e.data||{}).title||e.title;try{void 0===i&&t&&!ee[t]&&(ee[t]=!0,console.warn("\u9875\u9762["+t+"]\u6ca1\u6709\u5b9e\u73b0 title \u5c5e\u6027\uff0c\u4f1a\u5bfc\u81f4\u90e8\u5206\u673a\u578b\u4e0b\u6536\u96c6\u4e0d\u5230\u9875\u9762\u6807\u9898!")),"string"==typeof i&&(r=function(){return i}),"function"==typeof i&&(r=i)}catch(t){console.error("curPage.data.title \u6267\u884c\u9519\u8bef",t)}return{page:t,page_title:i||r()}},i.prototype.isDev=function(){return Pt()},i.create=function(){var t;try{t=new i}catch(e){t=i.prototype,console.error("new sr_sdk failed",e)}return t},i}(Mt).create(),oe=Page,se=Component;return Page=function(t){if(ne.option.proxyPage){var e=Kt(ne.track.bind(ne),ne.setChan.bind(ne),ne.setContext.bind(ne),ne.option.autoTrack,ne.option.openSdkShareDepth);oe(e(t))}else oe(t)},Component=function(t){if(ne.option.proxyComponent){var e=Bt(ne.track.bind(ne),ne.setChan.bind(ne),ne.setContext.bind(ne),ne.option.autoTrack,ne.option.openSdkShareDepth);return se(e(t))}return se(t)},ne}));
