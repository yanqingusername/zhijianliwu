(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Coupon/Coupon"],{2460:function(e,n,o){"use strict";o.r(n);var t=o("a46c"),r=o("98fd");for(var u in r)"default"!==u&&function(e){o.d(n,e,(function(){return r[e]}))}(u);o("abef");var c,a=o("f0c5"),s=Object(a["a"])(r["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);n["default"]=s.exports},"6e06":function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=r(o("e2fe"));function r(e){return e&&e.__esModule?e:{default:e}}var u={data:function(){return{number:0,top:[],btm:[],top1:[],btm1:[],top2:[],btm2:[],level:"",choose:"",level_name:"",url:""}},onLoad:function(n){var o=this;this.url=t.default.URL,n.choose&&(this.choose=n.choose),e.setStorageSync("coupon",""),e.setStorageSync("coupon_keynum",""),e.setStorageSync("coupon_number",""),e.setStorageSync("coupon_money",""),this.level_name=e.getStorageSync("level_name"),this.level=e.getStorageSync("level");var r=e.getStorageSync("id"),u='{"memberid":"'+r+'"}',c="get_coupon_number_list";this.$utils.post(c,u).then((function(e){console.log("我的优惠券",e);var n=(new Date).getTime();for(var t in e.rs){if(e.rs[t].coupon_type_info.begin_time=1e3*e.rs[t].coupon_type_info.begin_time,e.rs[t].coupon_type_info.end_time=1e3*e.rs[t].coupon_type_info.end_time,0==e.rs[t].coupon_type_info.type){if(e.rs[t].coupon_type_info.end_time-n<=0)e.rs[t].time="已过期";else if(e.rs[t].coupon_type_info.end_time-n>0){var r=new Date(parseInt(e.rs[t].coupon_type_info.begin_time)),u=r.getFullYear(),c=r.getMonth()+1,a=r.getDate(),s=r.getHours(),i=r.getMinutes(),p=r.getSeconds();s<10&&(s="0"+s),i<10&&(i="0"+i),p<10&&(p="0"+p),e.rs[t].coupon_type_info.begin_time=u+"-"+c+"-"+a+" "+s+":"+i+":"+p;r=new Date(parseInt(e.rs[t].coupon_type_info.end_time)),u=r.getFullYear(),c=r.getMonth()+1,a=r.getDate(),s=r.getHours(),i=r.getMinutes(),p=r.getSeconds();s<10&&(s="0"+s),i<10&&(i="0"+i),p<10&&(p="0"+p),e.rs[t].coupon_type_info.end_time=u+"-"+c+"-"+a+" "+s+":"+i+":"+p,e.rs[t].time=e.rs[t].coupon_type_info.begin_time+"-"+e.rs[t].coupon_type_info.end_time,e.rs[t].money=parseInt(e.rs[t].money)}}else e.rs[t].coupon_type_info.end_time-n<=0?e.rs[t].time="已过期":e.rs[t].coupon_type_info.end_time-n>0&&(e.rs[t].time=parseInt((e.rs[t].coupon_type_info.end_time-n)/864e5));0==e.rs[t].status?0==e.rs[t].coupon_type_info.type?"已过期"==e.rs[t].time?o.top2.push(e.rs[t]):o.top.push(e.rs[t]):"已过期"==e.rs[t].time?o.btm2.push(e.rs[t]):o.btm.push(e.rs[t]):1==e.rs[t].status&&(0==e.rs[t].coupon_type_info.type?o.top1.push(e.rs[t]):o.btm1.push(e.rs[t]))}}))},methods:{use:function(n){var o=n.currentTarget.dataset.keynum,t=n.currentTarget.dataset.money,r=n.currentTarget.dataset.id;console.log(o);var u=n.currentTarget.dataset.coupon_number,c=n.currentTarget.dataset.coupon_name;console.log(this.choose),"1"==this.choose?e.reLaunch({url:"../shopping/shopping?coupon_number="+u+"&coupon_name="+c}):2==this.choose?(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",o),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",t),console.log("coupon_money",t),console.log("coupon_number",u),e.navigateBack({delta:1})):(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",o),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",t),e.reLaunch({url:"../index/index"}))},Single:function(n){var o=n.currentTarget.dataset.keynum,t=n.currentTarget.dataset.money,r=n.currentTarget.dataset.id;console.log(o);var u=n.currentTarget.dataset.coupon_number,c=n.currentTarget.dataset.coupon_name;console.log(this.choose),1==this.choose?e.reLaunch({url:"../shopping/shopping?coupon_number="+u+"&coupon_name="+c}):2==this.choose?(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",o),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",t),console.log("coupon_money",t),console.log("coupon_number",u),e.navigateBack({delta:1})):(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",o),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",t),e.reLaunch({url:"../index/index"}))},nav:function(e){var n=e.currentTarget.dataset.index;this.number=n},receive:function(n){e.navigateTo({url:"../index-coupon/index-coupon"})}}};n.default=u}).call(this,o("543d")["default"])},"98fd":function(e,n,o){"use strict";o.r(n);var t=o("6e06"),r=o.n(t);for(var u in t)"default"!==u&&function(e){o.d(n,e,(function(){return t[e]}))}(u);n["default"]=r.a},a46c:function(e,n,o){"use strict";var t;o.d(n,"b",(function(){return r})),o.d(n,"c",(function(){return u})),o.d(n,"a",(function(){return t}));var r=function(){var e=this,n=e.$createElement,o=(e._self._c,e.__map(e.btm1,(function(n,o){var t=e.__get_orig(n),r=1==e.number?e.$utils.imageUrl(n.goodsinfo.head_img):null;return{$orig:t,g0:r}}))),t=e.__map(e.btm2,(function(n,o){var t=e.__get_orig(n),r=2==e.number?e.$utils.imageUrl(n.goodsinfo.head_img):null;return{$orig:t,g1:r}}));e.$mp.data=Object.assign({},{$root:{l0:o,l1:t}})},u=[]},abef:function(e,n,o){"use strict";var t=o("e564"),r=o.n(t);r.a},e564:function(e,n,o){},fb04:function(e,n,o){"use strict";(function(e){o("334b");t(o("66fd"));var n=t(o("2460"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])}},[["fb04","common/runtime","common/vendor"]]]);