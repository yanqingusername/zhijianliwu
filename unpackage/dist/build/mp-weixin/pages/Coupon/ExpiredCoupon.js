(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Coupon/ExpiredCoupon"],{4097:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement;e._self._c},u=[]},"5d60":function(e,t,n){},"71ea":function(e,t,n){"use strict";n.r(t);var o=n("f4bf"),r=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=r.a},"7e85":function(e,t,n){"use strict";n.r(t);var o=n("4097"),r=n("71ea");for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n("9e3f");var c,s=n("f0c5"),a=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=a.exports},"9e3f":function(e,t,n){"use strict";var o=n("5d60"),r=n.n(o);r.a},b958:function(e,t,n){"use strict";(function(e){n("334b");o(n("66fd"));var t=o(n("7e85"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},f4bf:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("e2fe"));function r(e){return e&&e.__esModule?e:{default:e}}var u={data:function(){return{number:0,top:[],btm:[],top1:[],btm1:[],top2:[],btm2:[],level:"",choose:"",level_name:"",url:"",couponList:[{id:1,money:20,desc:"母亲节专享",selecttext:"满200元可用",coupontype:"（全品类类可用）",timestring:"有效期：2021/06/12~2021/06/14",status:1},{id:21,money:50,desc:"端午节优惠券",selecttext:"满300元可用",coupontype:"（限食品类可用）",timestring:"有效期：2021/06/12~2021/06/14",status:2},{id:12,money:20,desc:"母亲节专享",selecttext:"满200元可用",coupontype:"（全品类类可用）",timestring:"有效期：2021/06/12~2021/06/14",status:2},{id:14,money:50,desc:"端午节优惠券",selecttext:"满500元可用",coupontype:"（全品类类可用）",timestring:"有效期：2021/06/12~2021/06/14",status:1}]}},onLoad:function(t){var n=this;this.url=o.default.URL,t.choose&&(this.choose=t.choose),e.setStorageSync("coupon",""),e.setStorageSync("coupon_keynum",""),e.setStorageSync("coupon_number",""),e.setStorageSync("coupon_money",""),this.level_name=e.getStorageSync("level_name"),this.level=e.getStorageSync("level");var r=e.getStorageSync("id"),u='{"memberid":"'+r+'"}',c="get_coupon_number_list";this.$utils.post(c,u).then((function(e){console.log("我的优惠券",e);var t=(new Date).getTime();for(var o in e.rs){if(e.rs[o].coupon_type_info.begin_time=1e3*e.rs[o].coupon_type_info.begin_time,e.rs[o].coupon_type_info.end_time=1e3*e.rs[o].coupon_type_info.end_time,0==e.rs[o].coupon_type_info.type){if(e.rs[o].coupon_type_info.end_time-t<=0)e.rs[o].time="已过期";else if(e.rs[o].coupon_type_info.end_time-t>0){var r=new Date(parseInt(e.rs[o].coupon_type_info.begin_time)),u=r.getFullYear(),c=r.getMonth()+1,s=r.getDate(),a=r.getHours(),i=r.getMinutes(),p=r.getSeconds();a<10&&(a="0"+a),i<10&&(i="0"+i),p<10&&(p="0"+p),e.rs[o].coupon_type_info.begin_time=u+"-"+c+"-"+s+" "+a+":"+i+":"+p;r=new Date(parseInt(e.rs[o].coupon_type_info.end_time)),u=r.getFullYear(),c=r.getMonth()+1,s=r.getDate(),a=r.getHours(),i=r.getMinutes(),p=r.getSeconds();a<10&&(a="0"+a),i<10&&(i="0"+i),p<10&&(p="0"+p),e.rs[o].coupon_type_info.end_time=u+"-"+c+"-"+s+" "+a+":"+i+":"+p,e.rs[o].time=e.rs[o].coupon_type_info.begin_time+"-"+e.rs[o].coupon_type_info.end_time,e.rs[o].money=parseInt(e.rs[o].money)}}else e.rs[o].coupon_type_info.end_time-t<=0?e.rs[o].time="已过期":e.rs[o].coupon_type_info.end_time-t>0&&(e.rs[o].time=parseInt((e.rs[o].coupon_type_info.end_time-t)/864e5));0==e.rs[o].status?0==e.rs[o].coupon_type_info.type?"已过期"==e.rs[o].time?n.top2.push(e.rs[o]):n.top.push(e.rs[o]):"已过期"==e.rs[o].time?n.btm2.push(e.rs[o]):n.btm.push(e.rs[o]):1==e.rs[o].status&&(0==e.rs[o].coupon_type_info.type?n.top1.push(e.rs[o]):n.btm1.push(e.rs[o]))}}))},methods:{use:function(t){var n=t.currentTarget.dataset.keynum,o=t.currentTarget.dataset.money,r=t.currentTarget.dataset.id;console.log(n);var u=t.currentTarget.dataset.coupon_number,c=t.currentTarget.dataset.coupon_name;console.log(this.choose),"1"==this.choose?e.reLaunch({url:"../shopping/shopping?coupon_number="+u+"&coupon_name="+c}):2==this.choose?(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",n),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",o),console.log("coupon_money",o),console.log("coupon_number",u),e.navigateBack({delta:1})):(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",n),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",o),e.reLaunch({url:"../index/index"}))},Single:function(t){var n=t.currentTarget.dataset.keynum,o=t.currentTarget.dataset.money,r=t.currentTarget.dataset.id;console.log(n);var u=t.currentTarget.dataset.coupon_number,c=t.currentTarget.dataset.coupon_name;console.log(this.choose),1==this.choose?e.reLaunch({url:"../shopping/shopping?coupon_number="+u+"&coupon_name="+c}):2==this.choose?(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",n),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",o),console.log("coupon_money",o),console.log("coupon_number",u),e.navigateBack({delta:1})):(e.setStorageSync("coupon",r),e.setStorageSync("coupon_keynum",n),e.setStorageSync("coupon_number",u),e.setStorageSync("coupon_money",o),e.reLaunch({url:"../index/index"}))},nav:function(e){var t=e.currentTarget.dataset.index;this.number=t},receive:function(t){e.navigateTo({url:"../index-coupon/index-coupon"})}}};t.default=u}).call(this,n("543d")["default"])}},[["b958","common/runtime","common/vendor"]]]);