(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderList/ReceptionAddress"],{"10d7":function(e,t,s){"use strict";var n=s("fb06"),o=s.n(n);o.a},5240:function(e,t,s){"use strict";s.r(t);var n=s("a75a"),o=s.n(n);for(var a in n)"default"!==a&&function(e){s.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},5922:function(e,t,s){"use strict";var n;s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return n}));var o=function(){var e=this,t=e.$createElement,s=(e._self._c,e.__map(e.purchase,(function(t,s){var n=e.__get_orig(t),o=e.$utils.imageUrl(t.head_img);return{$orig:n,g0:o}})));e.$mp.data=Object.assign({},{$root:{l0:s}})},a=[]},a75a:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("e10e")),n(s("1ae9"));function n(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{nav:"0",order:[],purchase:[],appid:"",key:"",merchantCode:"",openid:"",outTradeNo:"",totalAmount:"",nums:"",memberid:"",id:"",cardbag_number:"",fixed:!1,display:!1,choose:[],member_area_id:"",cardbag_detail_id:"",length:"",status:"",goods_spec:"",arr:"",goodsid:"",model:"",spe:"",item:"",specc_choose:"",indexx:"",provinceName:"",cityName:"",countyName:"",userName:"",linktel:"",telNumber:"",detailInfo:"",head_img:"",list:[],title:"",navv:"0",addresss:"",addli:{linkman:"",linktel:"",province_name:"",city_name:"",county_name:"",toast:""},addsign:"",delivery_type:"快递",showa:"",title_length:"",scope:"",isShowAddress:!1,keynumarr:[]}},onShow:function(){var t=this;if(1==this.showa){var s=e.getStorageSync("member_area_id");this.index=s,this.addlist(2)}1==this.scope&&(t.scope=!1,t.chooseadd())},onLoad:function(t){var s=this;this.id=e.getStorageSync("id"),this.level_name=e.getStorageSync("level_name"),this.cardbag_number=t.ordernumber,this.addlist(1),this.orderlist(),e.setStorageSync("member_area_id","");var n=setTimeout((function(e){s.showa=1,clearTimeout(n)}),200)},computed:{},methods:{getcheckgoodsarea:function(){var t=this,s=e.getStorageSync("id"),n=this.keynumarr.length>0?this.keynumarr.join(","):"",o="check_goods_area",a=JSON.stringify({memberid:s,member_area_id:this.member_area_id||"",keynum:n}),i="goods";this.$utils.postNew(o,a,i).then((function(s){1==s.sta?t.isShowAddress=!1:(t.isShowAddress=!0,e.showToast({icon:"none",title:s.msg}))}))},addlist:function(e){var t=this,s='{"memberid":"'+this.id+'"}',n="get_member_area";this.$utils.post(n,s).then((function(s){if(console.log("地址列表",s),s.rs.length>0)if(t.index)for(var n in console.log("选择的地址"),s.rs){var o=s.rs[n];t.index==o.id&&(t.addli=o,t.member_area_id=o.id,t.addsign=2)}else s.rs.length>0&&(console.log("默认第一个地址"),t.addli=s.rs[0],t.member_area_id=s.rs[0].id,t.addsign=2);else t.addli={linkman:"",linktel:"",province_name:"",city_name:"",county_name:"",address:"",toast:"请填写收货地址"},console.log("没地址"),t.addsign=0;2==e&&t.getcheckgoodsarea()}))},address:function(t){var s=this;if(0==this.addsign){console.log("直接添加来着");e.setStorageSync("add","");e.navigateTo({url:"../Address/Address"})}else this.addsign>0&&(console.log("选择地址"),e.navigateTo({url:"../Add/Add?cardbag_number="+s.cardbag_number}))},generate:function(t){var s=this,n=this,o=n.navv,a='{"memberid":"'+this.id+'","member_area_id":"'+this.member_area_id+'","cardbag_number":"'+this.cardbag_number+'","cardbag_detail_id":"'+this.cardbag_detail_id+'","delivery_type":"'+this.delivery_type+'"}',i="create_order";console.log(a),this.$utils.post(i,a).then((function(t){console.log("生成订单",t),1==t.sta?(e.navigateBack({}),e.setStorageSync("member_area_id",""),e.showToast({title:"已生成订单",icon:"success",success:function(t){1==n.title_length||0==n.title.length?(console.log("最后一个礼包"),setTimeout((function(t){e.navigateBack({delta:1})}),500)):n.title_length>1&&(n.title.splice(n.navv,1),console.log(o),console.log(n.title),console.log(n.title[o]),null==n.title[o]||void 0==n.title[o]?(console.log("无了"),setTimeout((function(t){e.navigateBack({delta:1})}),500)):n.cardbag_detail_id=n.title[o].id)}})):2==t.sta?(e.showToast({icon:"none",title:t.msg}),s.isShowAddress=!0):e.showToast({icon:"none",title:t.msg})}))},chooseadd:function(t){var s=this;e.chooseAddress({success:function(e){console.log("获取地址",e),s.provinceName=e.provinceName,s.cityName=e.cityName,s.countyName=e.countyName,s.userName=e.userName,s.linktel=e.linktel,s.detailInfo=e.detailInfo,s.telNumber=e.telNumber,s.add()},fail:function(t){console.log("失败"),e.openSetting({success:function(e){console.log(e.authSetting),s.scope=!0},fail:function(e){console.log(e),console.log(e.authSetting)}})}})},add:function(t){var s=this,n=this,o=this.provinceName,a=this.cityName,i=this.countyName,r='{"level":"1"}',d="get_area";this.$utils.post(d,r).then((function(t){for(var r in 0==t.rs.length&&(n.addresss=!0),t.rs)if(o==t.rs[r].name){s.provinceName=t.rs[r].id,console.log(t.rs[r].name);var d='{"level":"2","parentid":"'+t.rs[r].id+'"}',c="get_area";s.$utils.post(c,d).then((function(e){for(var t in 0==e.rs.length&&(n.addresss=!0),e.rs)if(a==e.rs[t].name){n.cityName=e.rs[t].id,console.log(e.rs[t].name);var s='{"level":"3","parentid":"'+e.rs[t].id+'"}',o="get_area";n.$utils.post(o,s).then((function(e){for(var t in console.log("县",e),0==e.rs.length&&(n.addresss=!0),e.rs)i==e.rs[t].name?(n.countyName=e.rs[t].id,console.log(e.rs[t].name),n.adds()):n.addresss=!0}))}else n.addresss=!0}))}else n.addresss=!0;1==n.addresss&&e.showToast({title:"匹配失败",icon:"none"})}))},adds:function(t){var s=this,n=this,o='{"memberid":"'+n.id+'","linkman":"'+n.userName+'","linktel":"'+n.telNumber+'","province":"'+n.provinceName+'","city":"'+n.cityName+'","county":"'+n.countyName+'","address":"'+n.detailInfo+'"}';console.log(o);var a="add_member_area";n.$utils.post(a,o).then((function(t){if(console.log(t),1==t.sta){var n='{"memberid":"'+s.id+'"}',o="get_member_area";s.$utils.post(o,n).then((function(e){console.log("地址列表",e),console.log("默认第一个地址"),s.addli=e.rs[0],s.member_area_id=e.rs[0].id,s.addsign=2,s.getcheckgoodsarea()}))}else e.showToast({title:"匹配失败,请手动填写地址",icon:"none",success:function(){var t=setTimeout((function(s){e.setStorageSync("add","");e.navigateTo({url:"../Address/Address"}),clearTimeout(t)}),1e3)}})}))},orderlist:function(e){var t=this,s=[],n=JSON.stringify({cardbag_number:this.cardbag_number,address_type:1}),o="get_cardbag_fenshu";this.$utils.post(o,n).then((function(e){for(var n in console.log("子订单列表",e.rs),e.rs[0].goodsinfo)e.rs[0].goodsinfo[n].guige="";for(var o in e.rs)0==e.rs[o].status&&(e.rs[o].index=Number(o)+1,s.push(e.rs[o]));if(t.title_length=s.length,t.title=s,t.purchase=e.rs[0].goodsinfo,t.cardbag_detail_id=s[0].id,t.length=e.rs[0].goodsinfo.length,t.status=e.rs.status,t.goods_spec=new Array(e.rs[0].goodsinfo.length),t.item=new Array(e.rs[0].goodsinfo.length),t.purchase.length>0)for(var a=0;a<t.purchase.length;a++){var i=t.purchase[a];t.keynumarr.push(i.keynum)}setTimeout((function(){t.getcheckgoodsarea()}),200)}))},chooseaddbutton:function(t){var s=this;e.getSetting({success:function(e){console.log("授权",e.authSetting["scope.address"]),1==e.authSetting["scope.address"]&&s.chooseadd()}})}}};t.default=o}).call(this,s("543d")["default"])},c38f:function(e,t,s){"use strict";s.r(t);var n=s("5922"),o=s("5240");for(var a in o)"default"!==a&&function(e){s.d(t,e,(function(){return o[e]}))}(a);s("10d7");var i,r=s("f0c5"),d=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=d.exports},f317:function(e,t,s){"use strict";(function(e){s("334b");n(s("66fd"));var t=n(s("c38f"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])},fb06:function(e,t,s){}},[["f317","common/runtime","common/vendor"]]]);