(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/receive"],{1138:function(e,t,a){"use strict";(function(e){a("334b");i(a("66fd"));var t=i(a("dfa8"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"78f1":function(e,t,a){"use strict";var i=a("a455"),n=a.n(i);n.a},"97cb":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=(e._self._c,"0"===e.gift?e.$utils.imageUrl(e.head_img):null),i="0"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/bot.png"):null,n="0"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/per_img.png"):null,s="1"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/cd.png"):null,r="1"===e.gift&&e.radio?e.$utils.osspath_url("/xcx-static/wishes/piay_icon1.png"):null,d="1"!==e.gift||e.radio?null:e.$utils.osspath_url("/xcx-static/wishes/piay_icon.png"),o="1"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/on.png"):null,c="2"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/mb_movie.png"):null;e.$mp.data=Object.assign({},{$root:{g0:a,g1:i,g2:n,g3:s,g4:r,g5:d,g6:o,g7:c}})},s=[]},a455:function(e,t,a){},c3ce:function(e,t,a){"use strict";a.r(t);var i=a("e47e"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},dfa8:function(e,t,a){"use strict";a.r(t);var i=a("97cb"),n=a("c3ce");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("78f1");var r,d=a("f0c5"),o=Object(d["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=o.exports},e47e:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("e2fe"));function n(e){return e&&e.__esModule?e:{default:e}}e.getRecorderManager();var s=e.createInnerAudioContext();e.createAudioContext("");s.autoplay=!0;var r={data:function(){return{gift:"1",send_talk_msg:"",zhufu_msg:"",name:"",w:"",schedule:"0",movable_x:"0",distance:"0",duration:"",stop:"0",width:"",zhufu_mp4:"",zhufu_mp3:"",radio:!0,present_memberid_headimg:"",present_memberid_name:""}},onLoad:function(t){var a=this;this.url=i.default.URL;var n=this,s=e.getStorageSync("id");this.sign=e.getStorageSync("sign");var r=e.getStorageSync("send_talk_msg");if(this.send_talk_msg=r,t.cardbag_number){this.cardbag_number=t.cardbag_number;var d=t.cardbag_number}else{this.cardbag_number=t.scene;d=t.scene}var o='{"cardbag_number":"'+d+'","cardbag_detail_id":"0"}',c="get_cardbag_detail";this.$utils.post(c,o).then((function(i){if(console.log("礼包详情",i),a.zhufu_msg=i.cardbag_theme.zhufu_msg,a.zhufu_mp3=i.cardbag_theme.zhufu_mp3,a.zhufu_mp4=i.cardbag_theme.zhufu_mp4,a.send_talk_msg=r,a.present_memberid_headimg=i.cardbag.present_memberid_headimg,a.present_memberid_name=i.cardbag.present_memberid_name,3==i.cardbag.type)var n=Date.parse(new Date)/1e3,o=i.cardbag.fixed_time;"1"==i.cardbag_theme.zhufu_type?a.gift="1":"0"==i.cardbag_theme.zhufu_type?a.gift="0":a.gift="2";var c='{"cardbag_number":"'+t.cardbag_number+'","memberid":"'+s+'"}',u="check_receive_cardbag";a.$utils.post(u,c).then((function(t){console.log("判断礼包是否领取",t),1==t.sta?n>o?(a.display="0",e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag="+d+"&cardbag_detail_id=0&cardbag_number="+d})):a.display="1":0==t.sta?(a.display="1",t.cardbag_number?(a.number=t.cardbag_number,a.cardbag_detail_id=t.cardbag_detail_id,a.display="0",e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag_number="+t.cardbag_number+"&cardbag_detail_id="+t.cardbag_detail_id+"&cardbag="+d+"&head_img="+i.cardbag.present_memberid_headimg+"&all_details_num="+i.cardbag.all_details_num+"&present_memberid_name="+i.cardbag.present_memberid_name})):n<o||e.showToast({title:t.msg,icon:"none"})):a.display="1"})),a.template=i.cardbag_theme,a.type=i.cardbag.type,a.cardbag=i.cardbag,a.head_img=i.cardbag.present_memberid_headimg,a.name=i.cardbag.present_memberid_name,a.all_details_num=i.cardbag.all_details_num,a.id=i.cardbag.present_memberid})),e.getSystemInfo({success:function(e){n.width=e.screenWidth,n.w=.57*e.screenWidth}});var u=e.getStorageSync("id");u?(this.idd=u,this.sign="200"):this.sign="0"},methods:{audioPlay:function(){var e=this;this.schedule=0,this.stop=1,this.radio=!1;var t=this;console.log("播放");var a=this.zhufu_mp3;s.src=a,s.play(),setTimeout((function(){s.onTimeUpdate((function(a){console.log("总时长",s.duration),console.log("当前播放进度",s.currentTime);var i=s.currentTime/s.duration*100,n=(.57*t.width-.57*t.width*.07)*i/100;0==e.stop||(e.movable_x=n,e.schedule=i,e.duration=s.duration,console.log(s.duration/s.currentTime)),s.onEnded((function(e){console.log("结束",e),t.radio=!0,t.movable_x=.5*t.width,t.schedule=0,t.stop=0,s.stop()}))}))}),500)},scroll:function(e){console.log(e),this.distance=e.detail.x},star:function(e){this.stop=0,this.click=0,console.log("暂停"),s.pause(),s.offTimeUpdate((function(e){console.log("取消监听进度条",e)}))},to:function(e){var t=this,a=this.distance,i=a/(.57*t.width-.57*t.width*.07)*100;console.log("跳转位置",this.duration*i/100),s.seek(this.duration*i/100),this.schedule=i,this.movable_x=a,this.stop=0},open:function(t){var a=this,i=this;if("200"==this.sign){e.showLoading({title:"正在领取"});var n='{"cardbag_number":"'+this.cardbag_number+'","memberid":"'+this.idd+'"}',r="receive_cardbag";this.$utils.post(r,n).then((function(t){console.log("领取卡包",t),1==t.sta?(e.setStorageSync("new_cardbag_number",t),3==a.type?(e.hideLoading(),e.showToast({title:"成功参与",icon:"none",mask:!0}),e.requestSubscribeMessage({tmplIds:["K7Go9Ex49p5hfB8qm3LhggEDJoZ1p2mKu2lyspAsqM0"],success:function(e){i.dingyue()},fail:function(e){wx.showToast({title:e.errMsg,icon:"none",mask:!0})}})):(a.type,s.src=i.auto,s.play(),setTimeout((function(a){e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag_number="+t.cardbag_number+"&cardbag_detail_id="+t.cardbag_detail_id+"&head_img="+i.head_img+"&all_details_num="+i.all_details_num+"&present_memberid_name="+i.name+"&old_cardbag_number="+i.cardbag_number}),e.hideLoading()}),500),setTimeout((function(e){s.stop()}),2200))):(e.hideLoading(),e.showToast({title:t.msg,icon:"none"}))}))}else e.showToast({title:"请先登录",icon:"none",mask:"true",success:function(t){setTimeout((function(t){e.reLaunch({url:"../signin/signin?receive=on&cardbag_number="+i.cardbag_number})}),1500)}})}}};t.default=r}).call(this,a("543d")["default"])}},[["1138","common/runtime","common/vendor"]]]);