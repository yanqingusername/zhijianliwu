(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/receive"],{1138:function(e,a,t){"use strict";(function(e){t("334b");n(t("66fd"));var a=n(t("dfa8"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("543d")["createPage"])},3682:function(e,a,t){"use strict";var n;t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return n}));var i=function(){var e=this,a=e.$createElement,t=(e._self._c,"0"===e.gift?e.$utils.imageUrl(e.head_img):null),n="1"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/cd.png"):null,i="1"===e.gift&&e.radio?e.$utils.osspath_url("/xcx-static/wishes/piay_icon1.png"):null,r="1"!==e.gift||e.radio?null:e.$utils.osspath_url("/xcx-static/wishes/piay_icon.png"),s="1"===e.gift?e.$utils.osspath_url("/xcx-static/wishes/on.png"):null;e.$mp.data=Object.assign({},{$root:{g0:t,g1:n,g2:i,g3:r,g4:s}})},r=[]},"78f1":function(e,a,t){"use strict";var n=t("a455"),i=t.n(n);i.a},a455:function(e,a,t){},c3ce:function(e,a,t){"use strict";t.r(a);var n=t("e47e"),i=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(a,e,(function(){return n[e]}))}(r);a["default"]=i.a},dfa8:function(e,a,t){"use strict";t.r(a);var n=t("3682"),i=t("c3ce");for(var r in i)"default"!==r&&function(e){t.d(a,e,(function(){return i[e]}))}(r);t("78f1");var s,d=t("f0c5"),o=Object(d["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);a["default"]=o.exports},e47e:function(e,a,t){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(t("e2fe"));function i(e){return e&&e.__esModule?e:{default:e}}e.getRecorderManager();var r=e.createInnerAudioContext();e.createAudioContext("");r.autoplay=!0;var s={data:function(){return{gift:"1",send_talk_msg:"",zhufu_msg:"",name:"",w:"",schedule:"0",movable_x:"0",distance:"0",duration:"",stop:"0",width:"",zhufu_mp4:"",zhufu_mp3:"",radio:!0,present_memberid_headimg:"",present_memberid_name:""}},onLoad:function(a){var t=this;this.url=n.default.URL;var i=this,r=e.getStorageSync("id");this.sign=e.getStorageSync("sign");var s=e.getStorageSync("send_talk_msg");if(this.send_talk_msg=s,a.cardbag_number){this.cardbag_number=a.cardbag_number;var d=a.cardbag_number}else{this.cardbag_number=a.scene;d=a.scene}var o='{"cardbag_number":"'+d+'","cardbag_detail_id":"0"}',c="get_cardbag_detail";this.$utils.post(c,o).then((function(n){if(console.log("礼包详情",n),t.zhufu_msg=n.cardbag_theme.zhufu_msg,t.zhufu_mp3=n.cardbag_theme.zhufu_mp3,t.zhufu_mp4=n.cardbag_theme.zhufu_mp4,t.send_talk_msg=s,t.present_memberid_headimg=n.cardbag.present_memberid_headimg,t.present_memberid_name=n.cardbag.present_memberid_name,3==n.cardbag.type)var i=Date.parse(new Date)/1e3,o=n.cardbag.fixed_time;"1"==n.cardbag_theme.zhufu_type?t.gift="1":"0"==n.cardbag_theme.zhufu_type?t.gift="0":t.gift="2";var c='{"cardbag_number":"'+a.cardbag_number+'","memberid":"'+r+'"}',u="check_receive_cardbag";t.$utils.post(u,c).then((function(a){console.log("判断礼包是否领取",a),1==a.sta?i>o?(t.display="0",e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag="+d+"&cardbag_detail_id=0&cardbag_number="+d})):t.display="1":0==a.sta?(t.display="1",a.cardbag_number?(t.number=a.cardbag_number,t.cardbag_detail_id=a.cardbag_detail_id,t.display="0",e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag_number="+a.cardbag_number+"&cardbag_detail_id="+a.cardbag_detail_id+"&cardbag="+d+"&head_img="+n.cardbag.present_memberid_headimg+"&all_details_num="+n.cardbag.all_details_num+"&present_memberid_name="+n.cardbag.present_memberid_name})):i<o||e.showToast({title:a.msg,icon:"none"})):t.display="1"})),t.template=n.cardbag_theme,t.type=n.cardbag.type,t.cardbag=n.cardbag,t.head_img=n.cardbag.present_memberid_headimg,t.name=n.cardbag.present_memberid_name,t.all_details_num=n.cardbag.all_details_num,t.id=n.cardbag.present_memberid})),e.getSystemInfo({success:function(e){i.width=e.screenWidth,i.w=.57*e.screenWidth}});var u=e.getStorageSync("id");u?(this.idd=u,this.sign="200"):this.sign="0"},methods:{audioPlay:function(){var e=this;this.schedule=0,this.stop=1,this.radio=!1;var a=this;console.log("播放");var t=this.zhufu_mp3;r.src=t,r.play(),setTimeout((function(){r.onTimeUpdate((function(t){console.log("总时长",r.duration),console.log("当前播放进度",r.currentTime);var n=r.currentTime/r.duration*100,i=(.57*a.width-.57*a.width*.07)*n/100;0==e.stop||(e.movable_x=i,e.schedule=n,e.duration=r.duration,console.log(r.duration/r.currentTime)),r.onEnded((function(e){console.log("结束",e),a.radio=!0,a.movable_x=.5*a.width,a.schedule=0,a.stop=0,r.stop()}))}))}),500)},scroll:function(e){console.log(e),this.distance=e.detail.x},star:function(e){this.stop=0,this.click=0,console.log("暂停"),r.pause(),r.offTimeUpdate((function(e){console.log("取消监听进度条",e)}))},to:function(e){var a=this,t=this.distance,n=t/(.57*a.width-.57*a.width*.07)*100;console.log("跳转位置",this.duration*n/100),r.seek(this.duration*n/100),this.schedule=n,this.movable_x=t,this.stop=0},open:function(a){var t=this,n=this;if("200"==this.sign){e.showLoading({title:"正在领取"});var i='{"cardbag_number":"'+this.cardbag_number+'","memberid":"'+this.idd+'"}',s="receive_cardbag";this.$utils.post(s,i).then((function(a){console.log("领取卡包",a),1==a.sta?(e.setStorageSync("new_cardbag_number",a),3==t.type?(e.hideLoading(),e.showToast({title:"成功参与",icon:"none",mask:!0}),e.requestSubscribeMessage({tmplIds:["K7Go9Ex49p5hfB8qm3LhggEDJoZ1p2mKu2lyspAsqM0"],success:function(e){n.dingyue()},fail:function(e){wx.showToast({title:e.errMsg,icon:"none",mask:!0})}})):(t.type,r.src=n.auto,r.play(),setTimeout((function(t){e.navigateTo({url:"../redEnvelopes/redEnvelopes?cardbag_number="+a.cardbag_number+"&cardbag_detail_id="+a.cardbag_detail_id+"&head_img="+n.head_img+"&all_details_num="+n.all_details_num+"&present_memberid_name="+n.name+"&old_cardbag_number="+n.cardbag_number}),e.hideLoading()}),500),setTimeout((function(e){r.stop()}),2200))):(e.hideLoading(),e.showToast({title:a.msg,icon:"none"}))}))}else e.showToast({title:"请先登录",icon:"none",mask:"true",success:function(a){setTimeout((function(a){e.reLaunch({url:"../signin/signin?receive=on&cardbag_number="+n.cardbag_number})}),1500)}})}}};a.default=s}).call(this,t("543d")["default"])}},[["1138","common/runtime","common/vendor"]]]);