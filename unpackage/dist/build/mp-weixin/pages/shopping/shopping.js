(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/shopping"],{1035:function(t,o,e){"use strict";(function(t){e("aa93");s(e("66fd"));var o=s(e("2eec"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"2eec":function(t,o,e){"use strict";e.r(o);var s=e("56f2"),i=e("dfa8");for(var n in i)"default"!==n&&function(t){e.d(o,t,(function(){return i[t]}))}(n);e("3d6e");var u,r=e("f0c5"),c=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],u);o["default"]=c.exports},"3d6e":function(t,o,e){"use strict";var s=e("f5fc"),i=e.n(s);i.a},"56f2":function(t,o,e){"use strict";e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return n})),e.d(o,"a",(function(){return s}));var s={uniPopup:function(){return e.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(e.bind(null,"3d61"))}},i=function(){var t=this,o=t.$createElement,e=(t._self._c,0==t.com?t.$utils.osspath_url("/xcx-static/xiong.png"):null),s=0!=t.com?t.__map(t.goodsinfo,(function(o,e){var s=t.__get_orig(o),i=t.$utils.imageUrl(o.goodsinfo.head_img),n=t.$utils.cut_str(o.goodsinfo.goodsname,16);return{$orig:s,g1:i,g2:n}})):null;t.$mp.data=Object.assign({},{$root:{g0:e,l0:s}})},n=[]},"751c":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={data:function(){return{price_zhe:0,goodsinfo:[],goodsid:"",flag:!0,type:"",show:"1",gift:!0,chooses:1,numberss:0,com:"",fenshu:1,zhufu_type:0,id:""}},onShow:function(o){var e=this,s=getCurrentPages(),i=s[s.length-1].route;console.log("当前页面的路由",i);var n=s[s.length-1].options;console.log("当前页面的参数",n);var u=n.type;"undefined"==typeof u&&(u=0),this.type=u;var r=t.getStorageSync("id");this.memberid=r;var c='{"memberid":"'+r+'","buy_type":"'+u+'"}',a="get_giftbag_list";this.$utils.post(a,c).then((function(o){if(console.log("商品",o),o.rs.giftbag.length>=1){e.goodsinfo=o.rs.giftbag,e.price_zhe=o.rs.price_zhe;var s=0;for(var i in o.rs.giftbag)s+=Number(o.rs.giftbag[i].goodsnum);e.numberss=s,t.setStorageSync("type",u),e.com=!0}else e.com=!1}));var g=t.getStorageSync("zhufu_type");this.zhufu_type=g,console.log("this.zhufu_type11"),console.log(this.zhufu_type),0==this.zhufu_type?this.zhufu_type="福语":1==this.zhufu_type?this.zhufu_type="语音":2==this.zhufu_type&&(this.zhufu_type="视频"),this.caltotalmoney()},onLoad:function(t){this.caltotalmoney()},methods:{box_gift:function(){t.reLaunch({url:"../index/index"})},increase:function(t){console.log(t);var o=t.goodsid;this.goodsid=o,this.goodsnum=1;var e=t.goodsnum+1;this.give(t,e)},reduce:function(t){var o=t.goodsid;this.goodsnum=-1;var e=t.goodsnum-1;this.goodsid=o,this.give(t,e)},give:function(o,e){var s=this,i=t.getStorageSync("id");this.memberid=i;var n=t.getStorageSync("type");this.type=n;var u='{"memberid":"'+this.memberid+'","goodsid":"'+this.goodsid+'","num":"'+this.goodsnum+'","buy_type":"'+n+'","goods_model":"'+o.goods_model+'","goods_spec":"'+o.goods_spec+'","goods_item":"'+o.goods_spec_item+'"}',r="op_buy_shopping_cart";console.log(u),this.$utils.post(r,u).then((function(t){console.log("添加购物车",t);var o='{"memberid":"'+s.memberid+'","buy_type":"'+n+'"}',e="get_giftbag_list";s.$utils.post(e,o).then((function(t){console.log("更改价格",t),t.rs.giftbag.length>=1&&(s.goodsinfo=t.rs.giftbag)}))})),this.caltotalmoney(),console.log(this.goodsinfo)},changefenshu:function(t){console.log("获取价格接口"),this.caltotalmoney()},caltotalmoney:function(o){var e=this,s=this.fenshu,i=t.getStorageSync("id");1!=this.show&&0!=this.show||(s=1);var n="get_fenshu_price",u=JSON.stringify({memberid:i,fenshu:s,buy_type:0});this.$utils.post(n,u).then((function(o){console.log(o);var s="success";if(1!=o.sta)return s="none",void t.showToast({icon:s,title:o.msg,duration:2e3});e.price_zhe=o.rs.price_zhe}))},add:function(o){t.reLaunch({url:"../index/index"})},open:function(){this.$refs.popup.open("")},toggle:function(t){this.$refs.popup.open("")},close:function(t){this.$refs.popup.close()},chooseGift:function(o){var e="get_giftbag_list",s=t.getStorageSync("id");this.memberid=s;var i=JSON.stringify({memberid:this.memberid,buy_type:0});this.$utils.post(e,i).then((function(o){console.log("直接赠送"),console.log(o);var e="success";1!=o.sta&&(e="none",t.showToast({icon:e,title:o.msg,duration:2e3})),t.navigateTo({url:"../shopping/gifts?type=0"})}))},wishes:function(o){var e=t.getStorageSync("zhufu_type");this.zhufu_type=e;var s=t.getStorageSync("id");if(this.memberid=s,this.zhufu_type==this.zhufu_type){var i="get_giftbag_list",n=JSON.stringify({memberid:this.memberid,buy_type:0});this.$utils.post(i,n).then((function(o){console.log("直接赠送"),console.log(o);var e="success";1!=o.sta&&(e="none",t.showToast({icon:e,title:o.msg,duration:2e3})),t.navigateTo({url:"../shopping/wishes?type=0"})}))}},box1:function(){this.show="2",this.$refs.popup.close(),this.caltotalmoney()},box2:function(){this.show="1",this.$refs.popup.close(),this.caltotalmoney()},box3:function(){this.show="0",this.$refs.popup.close(),this.caltotalmoney()},packages:function(o){var e=this;if("2"===this.show){var s=t.getStorageSync("type");this.type=s;var i=t.getStorageSync("id");this.memberid=i;var n='{"memberid":"'+i+'","buy_type":"'+s+'"}',u="get_buy_shopping_cart";this.$utils.post(u,n).then((function(o){console.log(o),0==o.rs.goodslist.length&&t.showToast({icon:"none",title:"当前礼袋无商品"}),null!=e.zhufu_type&&null!=e.chooses&&0!=o.rs.goodslist.length&&t.navigateTo({url:"../shopping/packages?type=0&fenshu="+e.fenshu+"&wanfa=1"})}))}else if("1"===this.show){var r=t.getStorageSync("type");this.type=r;var c=t.getStorageSync("id");this.memberid=c;n='{"memberid":"'+c+'","buy_type":"'+r+'"}',u="get_buy_shopping_cart";this.$utils.post(u,n).then((function(o){console.log("商品信息11",o),0==o.rs.goodslist.length&&t.showToast({icon:"success",title:"当前礼袋无商品"}),null!=e.zhufu_type&&null!=e.chooses&&0!=o.rs.goodslist.length&&(e.$forceUpdate(),t.navigateTo({url:"../shopping/packages?type=0&fenshu=1&wanfa=4"}))}))}else{var a=t.getStorageSync("type");this.type=a;var g=t.getStorageSync("id");this.memberid=g;n='{"memberid":"'+g+'","buy_type":"'+a+'"}',u="get_buy_shopping_cart";this.$utils.post(u,n).then((function(o){console.log(o),0==o.rs.goodslist.length&&t.showToast({icon:"success",title:"当前礼袋无商品"}),null!=e.zhufu_type&&null!=e.chooses&&0!=o.rs.goodslist.length&&t.navigateTo({url:"../shopping/must?type=0"})}))}}}};o.default=e}).call(this,e("543d")["default"])},dfa8:function(t,o,e){"use strict";e.r(o);var s=e("751c"),i=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(o,t,(function(){return s[t]}))}(n);o["default"]=i.a},f5fc:function(t,o,e){}},[["1035","common/runtime","common/vendor"]]]);