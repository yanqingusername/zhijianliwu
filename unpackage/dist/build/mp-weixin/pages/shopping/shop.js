(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/shop"],{"2d08":function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i}));var i={uniPopup:function(){return s.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(s.bind(null,"f3d2"))}},o=function(){var t=this,e=t.$createElement,s=(t._self._c,"exchange"!=t.statutype||1!=t.is_exchange_type&&0!=t.is_exchange_type?null:t.$utils.cut_str(t.orderInfo.card_name,16)),i=("exchange"!=t.statutype||1!=t.is_exchange_type&&0!=t.is_exchange_type)&&(t.goodsinfo.length>0||t.undercarriage_list.length>0)?t.__map(t.goodsinfo,(function(e,s){var i=t.__get_orig(e),o=t.$utils.imageUrl(e.goodsinfo.head_img),n=t.$utils.imageUrl(e.goodsinfo.head_img),r=t.$utils.cut_str(e.goodsinfo.goodsname,16);return{$orig:i,g1:o,g2:n,g3:r}})):null,o=("exchange"!=t.statutype||1!=t.is_exchange_type&&0!=t.is_exchange_type)&&(t.goodsinfo.length>0||t.undercarriage_list.length>0)?t.__map(t.undercarriage_list,(function(e,s){var i=t.__get_orig(e),o=t.$utils.imageUrl(e.goodsinfo.head_img),n=t.$utils.cut_str(e.goodsinfo.goodsname,16);return{$orig:i,g4:o,g5:n}})):null,n="exchange"==t.statutype&&(1==t.is_exchange_type||0==t.is_exchange_type)||t.goodsinfo.length>0||t.undercarriage_list.length>0?null:t.$utils.osspath_url("/xcx-static/xiong.png"),r=t.isShowPop&&t.unShopList.length>0&&1==t.unShopList.length?t.__map(t.unShopList,(function(e,s){var i=t.__get_orig(e),o=t.$utils.cut_str(e.goodsname,16);return{$orig:i,g7:o}})):null;t.$mp.data=Object.assign({},{$root:{g0:s,l0:i,l1:o,g6:n,l2:r}})},n=[]},"2f53":function(t,e,s){"use strict";(function(t){s("334b");i(s("66fd"));var e=i(s("6890"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},6890:function(t,e,s){"use strict";s.r(e);var i=s("2d08"),o=s("9538");for(var n in o)"default"!==n&&function(t){s.d(e,t,(function(){return o[t]}))}(n);s("fdae");var r,u=s("f0c5"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=a.exports},"81f7":function(t,e,s){},9538:function(t,e,s){"use strict";s.r(e);var i=s("ea69"),o=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},ea69:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{price_zhe:"0.00",goodsinfo:[],undercarriage_list:[],goodsid:"",checknum:"1",flag:!0,type:"",show:"2",gift:!0,zhufu_type:0,chooses:1,length:0,fenshu:1,setgiftssuccess:"2",setwishessuccess:"2",statutype:"",ordernumber:"",orderInfo:"",is_exchange_type:-1,numberss:0,remark:"大吉大利，恭喜发财！",remarkNumber:0,isShowPop:!1,unShopList:[],cart_goods_id:"",isSystemInfo:!1}},onLoad:function(t){this.isSystemInfo=this.$utils.isSystemInfo();var e=t.type;this.type=e,t&&t.statutype&&t.ordernumber&&(this.statutype=t.statutype,this.ordernumber=t.ordernumber,this.is_exchange_type=t.is_exchange_type)},onShow:function(){var e=this;if(this.setgiftssuccess=t.getStorageSync("setgiftssuccess"),this.setwishessuccess=t.getStorageSync("setwishessuccess"),"exchange"!=this.statutype||1!=this.is_exchange_type&&0!=this.is_exchange_type){var s=this.type,i=t.getStorageSync("id");this.memberid=i;var o='{"memberid":"'+i+'","buy_type":"'+s+'"}',n="get_giftbag_list";this.$utils.post(n,o).then((function(s){console.log("商品信息",s),1===s.sta&&t.showToast({icon:"success",title:s.msg,duration:1e3}),e.goodsinfo=s.rs.giftbag,e.undercarriage_list=s.rs.undercarriage_list,e.price_zhe=s.rs.price_zhe,e.cart_goods_id=s.rs.cart_goods_id;var i=0;for(var o in s.rs.giftbag)i+=Number(s.rs.giftbag[o].goodsnum);e.numberss=i})),this.caltotalmoney()}else{var r=this,u="get_exchange_order_info",a="order",g=t.getStorageSync("id"),c=JSON.stringify({ordernumber:this.ordernumber,memberid:g});this.$utils.postNew(u,c,a).then((function(t){1==t.sta&&(r.orderInfo=t.rs,r.numberss=1)}))}var h=t.getStorageSync("zhufu_type");this.zhufu_type=h,console.log("this.zhufu_type11"),console.log(this.zhufu_type),0==this.zhufu_type?this.zhufu_type="福语":1==this.zhufu_type?this.zhufu_type="语音":2==this.zhufu_type&&(this.zhufu_type="视频")},methods:{goDel:function(e){var s=this,i=t.getStorageSync("id"),o="del_shopping_cart",n="goods",r=JSON.stringify({goodsid:e,memberid:i,buy_type:this.type});this.$utils.postNew(o,r,n).then((function(e){if(1==e.sta){s.isShowPop=!1;var i=s.type,o=t.getStorageSync("id");s.memberid=o;var n='{"memberid":"'+o+'","buy_type":"'+i+'"}',r="get_giftbag_list";s.$utils.post(r,n).then((function(e){console.log("商品信息",e),1===e.sta&&t.showToast({icon:"success",title:e.msg,duration:1e3}),s.goodsinfo=e.rs.giftbag,s.undercarriage_list=e.rs.undercarriage_list,s.price_zhe=e.rs.price_zhe,s.cart_goods_id=e.rs.cart_goods_id;var i=0;for(var o in e.rs.giftbag)i+=Number(e.rs.giftbag[o].goodsnum);s.numberss=i})),s.caltotalmoney()}}))},inputRemark:function(t){this.remark=t.detail.value,this.remarkNumber=t.detail.value.length},goToDetails:function(e){t.navigateTo({url:"../details/details?keynum="+e})},backbutton:function(e){t.navigateBack({delta:1})},caltotalmoney:function(e){var s=this,i=this.fenshu;console.log("show"),console.log(this.show);var o=t.getStorageSync("id");1!=this.show&&0!=this.show||(i=1);var n="get_fenshu_price",r=JSON.stringify({memberid:o,fenshu:i,buy_type:1});this.$utils.post(n,r).then((function(e){console.log(e);var i="success";if(1!=e.sta)return i="none",void t.showToast({icon:i,title:e.msg,duration:2e3});s.price_zhe=e.rs.price_zhe}))},changefenshu:function(t){console.log("获取价格接口"),this.caltotalmoney()},add:function(e){t.redirectTo({url:"./shoppingList"})},box_gift:function(){t.redirectTo({url:"./shoppingList"})},increase:function(t){console.log(t);var e=t.goodsid;this.goodsid=e;var s=t.goodsnum+1;this.numberss+=1,this.give(t,s)},reduce:function(t){var e=t.goodsid,s=t.goodsnum-1;this.goodsid=e,this.numberss-=1,this.give(t,s)},give:function(e,s){var i=this,o=t.getStorageSync("id");this.memberid=o;var n=this.type,r='{"memberid":"'+this.memberid+'","goodsid":"'+this.goodsid+'","num":"'+s+'","buy_type":"'+n+'","goods_model":"'+e.goods_model+'","goods_spec":"'+e.goods_spec+'","goods_item":"'+e.goods_spec_item+'"}',u="op_buy_shopping_cart";console.log(r),this.$utils.post(u,r).then((function(t){console.log("添加购物车",t);var e='{"memberid":"'+i.memberid+'","buy_type":"'+n+'"}',s="get_giftbag_list";i.$utils.post(s,e).then((function(t){console.log("更改价格",t),i.goodsinfo=t.rs.giftbag,i.undercarriage_list=t.rs.undercarriage_list,i.price_zhe=t.rs.price_zhe,i.cart_goods_id=t.rs.cart_goods_id;var e=0;for(var s in t.rs.giftbag)e+=Number(t.rs.giftbag[s].goodsnum);i.numberss=e,i.caltotalmoney()}))}))},open:function(){this.$refs.popup.open()},toggle:function(t){"exchange"==this.statutype||this.$refs.popup.open()},close:function(t){this.$refs.popup.close()},chooseGift:function(e){t.navigateTo({url:"../shopping/CBlessingCard"})},wishes:function(e){var s=t.getStorageSync("zhufu_type");this.zhufu_type=s;var i=t.getStorageSync("id");if(this.memberid=i,this.zhufu_type==this.zhufu_type){var o="get_giftbag_list",n=JSON.stringify({memberid:this.memberid,buy_type:1});this.$utils.post(o,n).then((function(e){console.log("直接赠送"),console.log(e);var s="success";1!=e.sta&&(s="none",t.showToast({icon:s,title:e.msg,duration:2e3})),t.navigateTo({url:"../shopping/wishes?type=1"})}))}},box1:function(){this.show="2",this.$refs.popup.close(),this.caltotalmoney()},box2:function(){this.show="1",this.$refs.popup.close(),this.caltotalmoney()},packages:function(e){var s=this;if("exchange"!=this.statutype||1!=this.is_exchange_type&&0!=this.is_exchange_type){if("2"===this.show){if(this.setgiftssuccess=t.getStorageSync("setgiftssuccess")||2,2==this.setgiftssuccess)return void t.showToast({icon:"none",title:"请先定制祝福卡！"});var i=this.type,o=t.getStorageSync("id");this.memberid=o;var n='{"memberid":"'+o+'","buy_type":"'+i+'","cart_goods_id":"'+this.cart_goods_id+'"}',r="get_buy_shopping_cart";this.$utils.post(r,n).then((function(e){console.log(e),1==e.sta?null!=s.zhufu_type&&null!=s.chooses&&t.navigateTo({url:"../shopping/packages?type=1&fenshu="+s.fenshu+"&wanfa=1"}):2==e.sta&&(s.isShowPop=!0,s.unShopList=e.rs.undercarriage_list)}))}else if("1"===this.show){var u=this.type,a=t.getStorageSync("id");this.memberid=a;n='{"memberid":"'+a+'","buy_type":"'+u+'","cart_goods_id":"'+this.cart_goods_id+'"}',r="get_buy_shopping_cart";this.$utils.post(r,n).then((function(e){console.log(e),1==e.sta?null!=s.zhufu_type&&null!=s.chooses&&t.navigateTo({url:"../shopping/packages?type=1&fenshu=1&wanfa=4&remark="+s.remark}):2==e.sta&&(s.isShowPop=!0,s.unShopList=e.rs.undercarriage_list)}))}}else t.navigateTo({url:"../index-coupon/ExchangePackages?ordernumber="+this.ordernumber})}}};e.default=s}).call(this,s("543d")["default"])},fdae:function(t,e,s){"use strict";var i=s("81f7"),o=s.n(i);o.a}},[["2f53","common/runtime","common/vendor"]]]);