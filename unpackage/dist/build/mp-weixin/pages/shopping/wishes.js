(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/wishes"],{"1e4e":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$utils.osspath_url("/xcx-static/wishes/mb_recording.png")),o=t.$utils.osspath_url("/xcx-static/wishes/cd.png"),n=t.$utils.osspath_url("/xcx-static/wishes/on.png"),s=t.radio?t.$utils.osspath_url("/xcx-static/wishes/piay_icon1.png"):null,a=t.radio?null:t.$utils.osspath_url("/xcx-static/wishes/piay_icon.png"),u=t.showvideoPlayBtn?t.$utils.osspath_url("/xcx-static/wishes/piay_icon1.png"):null;t.$mp.data=Object.assign({},{$root:{g0:i,g1:o,g2:n,g3:s,g4:a,g5:u}})},s=[]},"65d2":function(t,e,i){"use strict";(function(t){i("aa93");o(i("66fd"));var e=o(i("9306"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"84d3":function(t,e,i){"use strict";i.r(e);var o=i("8957"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},8957:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("d54e"));function n(t){return t&&t.__esModule?t:{default:t}}var s=t.getRecorderManager(),a=t.createInnerAudioContext();a.autoplay=!0;var u={data:function(){return{Inv:0,value:"福语",val:"福语",send_talk_msg:"",theme_background:"",zhufu_theme_id:"",zhufu_msg:"大吉大利 恭喜发财",sign:"",begin:1,radio:!0,videoShow:!1,voicePath:null,w:"",schedule:"0",movable_x:"0",distance:"0",duration:"",stop:"0",width:"",statusVideo:!1,zhufu_mp4:"",showvideoPlayBtn:!0,videoTime:0,innerVideoContext:null}},onLoad:function(e){this.sign=t.getStorageSync("sign"),this.url=o.default.URL;var i=this;console.log("份数",e),this.fenshu=e.fenshu,t.getSystemInfo({success:function(t){i.width=t.screenWidth,i.w=.5*t.screenWidth}});var n=this;console.log(s),s.onStop((function(e){console.log(3333),t.showLoading({title:"上传中"}),console.log(e),console.log("recorder stop"+JSON.stringify(e)),n.voicePath=e.tempFilePath,t.uploadFile({url:"https://zhijianlw.com/api.php/index/upload_file",filePath:e.tempFilePath,name:"file",formData:{user:"test"},success:function(e){n.begin=3,console.log("上传音频",e);var o=JSON.parse(e.data);1==o.sta?(t.hideLoading(),console.log("重置"),n.schedule=0,n.movable_x=0,a.seek(0),n.zhufu_mp3=n.$utils.imageUrl(o.filename),console.log("上传成功",o),console.log(i.url+o.filename)):t.showToast({title:"上传失败",icon:"none",mask:"true"})},fail:function(t){n.begin=1}})}))},methods:{changeInv:function(t){this.Inv=t,this.innerVideoContext&&(this.showvideoPlayBtn=!0,this.innerVideoContext.pause(),this.statusVideo=!1)},start:function(){this.radio=!0,console.log("开始录音"),s.start(),t.showLoading({title:"正在录音中"})},stopp:function(){t.hideLoading(),this.radio=!0,console.log("结束录音"),s.stop()},audioPlay:function(){var t=this;this.stop=1,this.radio=!this.radio;var e=this;console.log("播放"),console.log(this.voicePath),a.src=this.voicePath,a.play(),setTimeout((function(){a.currentTime,a.onTimeUpdate((function(i){console.log("总时长",a.duration),console.log("当前播放进度",a.currentTime);var o=a.currentTime/a.duration*100,n=(.5*e.width-.5*e.width*.07)*o/100;0==t.stop||(t.movable_x=n,t.schedule=o,t.duration=a.duration,console.log(a.duration/a.currentTime)),a.onEnded((function(i){console.log("结束",i),e.radio=0,t.movable_x=.5*e.width,t.schedule=100,t.stop=0}))}))}))},audioPause:function(t){this.stop=0,this.click=0,console.log("暂停"),a.pause(),a.offTimeUpdate((function(t){console.log("取消监听进度条",t)}))},scroll:function(t){console.log(t),this.distance=t.detail.x},star:function(t){this.stop=0,this.click=0,console.log("暂停"),a.pause(),a.offTimeUpdate((function(t){console.log("取消监听进度条",t)}))},to:function(t){var e=this,i=this.distance,o=i/(.57*e.width-.57*e.width*.07)*100;console.log("跳转位置",this.duration*o/100),a.seek(this.duration*o/100),this.schedule=o,this.movable_x=i,this.stop=0},videoPlay:function(){this.zhufu_mp4&&(this.innerVideoContext.play(),this.showvideoPlayBtn=!1,this.statusVideo=!0)},videoClick:function(){this.statusVideo?(this.showvideoPlayBtn=!0,this.innerVideoContext.pause(),this.statusVideo=!1):(this.innerVideoContext.play(),this.showvideoPlayBtn=!1,this.statusVideo=!0)},videoPlay1:function(){this.isfirstClickVideo=!1},videoTimeUpdateEvent:function(t){var e=Number(t.detail.currentTime);console.log("播放进度条改变",e),e>=this.videoTime&&(this.innerVideoContext.exitFullScreen(),this.innerVideoContext.pause(),this.innerVideoContext.seek(0),this.showvideoPlayBtn=!0,this.statusVideo=!1)},alt:function(t){this.zhufu_msg=t.detail.value},onClickItem:function(t){this.current!==t.currentIndex&&(this.current=t.currentIndex)},radioChange:function(t){console.log("type:"+t.detail.value),this.sex=t.detail.value},vide:function(e){console.log(e);var i=this;t.chooseVideo({count:1,sourceType:["camera","album"],success:function(e){console.log("视频",e),i.videoTime=Math.floor(e.duration);var o=e.tempFilePath;t.showLoading({title:"上传中"}),t.uploadFile({url:"https://zhijianlw.com/api.php/index/upload_file",filePath:o,name:"file",formData:{user:"test"},success:function(e){if(console.log(e),200==e.statusCode){var o=JSON.parse(e.data);t.hideLoading(),i.zhufu_mp4=i.$utils.imageUrl(o.filename),console.log(o),t.showToast({title:"上传成功",icon:"none",mask:"true"}),i.innerVideoContext=t.createVideoContext("video1",i),i.videoShow=!0,i.showvideoPlayBtn=!1,i.statusVideo=!1}else 413==e.statusCode?(t.hideLoading(),t.showToast({title:"视频过大",icon:"none",mask:"true"})):(t.hideLoading(),t.showToast({title:"上传失败",icon:"none",mask:"true"}))},fail:function(t){console.log(t)}})},fail:function(t){console.log("失败",t)}})},radiofun:function(t){console.log(545435454),this.value=t.detail.value,this.val=t.detail.value,this.showvideoPlayBtn=!0,this.innerVideoContext.pause(),this.statusVideo=!1},wish:function(e){var i=this,o=t.getStorageSync("id"),n=t.getStorageSync("zhufu_theme_id"),s=t.getStorageSync("theme_type"),a=t.getStorageSync("send_talk_msg");this.memberid=o,this.zhufu_theme_id=n,this.theme_type=s,this.send_talk_msg=a;var u={zhufu_theme_id:this.zhufu_theme_id,memberid:this.memberid,theme_type:this.theme_type,send_talk_msg:this.send_talk_msg,zhufu_type:0,theme_background:this.theme_background,update_type:1};0==this.Inv?(u["zhufu_type"]=0,u["zhufu_msg"]=this.zhufu_msg):1==this.Inv?(u["zhufu_type"]=1,u["zhufu_mp3"]=this.zhufu_mp3):(u["zhufu_type"]=2,u["zhufu_mp4"]=this.zhufu_mp4),console.log(u);var l="save_zhufu_theme";this.$utils.post(l,JSON.stringify(u)).then((function(e){console.log("修改祝福模板",e),0==e.sta?(t.showToast({title:e.msg,icon:"none",mask:"true",success:function(t){}}),i.send_talk_msg=a):t.showToast({title:"设置成功",icon:"success",mask:"true",success:function(e){setTimeout((function(e){t.navigateBack({url:1})}),1500)}})}))}}};e.default=u}).call(this,i("543d")["default"])},9306:function(t,e,i){"use strict";i.r(e);var o=i("1e4e"),n=i("84d3");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("b03c");var a,u=i("f0c5"),l=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=l.exports},af9f:function(t,e,i){},b03c:function(t,e,i){"use strict";var o=i("af9f"),n=i.n(o);n.a}},[["65d2","common/runtime","common/vendor"]]]);