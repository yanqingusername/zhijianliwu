(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/share"],{"42d1":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return o}));var o={rCanvas:function(){return Promise.all([e.e("common/vendor"),e.e("components/r-canvas/r-canvas")]).then(e.bind(null,"c910"))}},a=function(){var n=this,t=n.$createElement,e=(n._self._c,n.$utils.imageUrl(n.posterUrl));n.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},4554:function(n,t,e){"use strict";e.r(t);var o=e("42d1"),a=e("ee1e");for(var r in a)"default"!==r&&function(n){e.d(t,n,(function(){return a[n]}))}(r);e("4c4d");var s,c=e("f0c5"),i=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=i.exports},"4c4d":function(n,t,e){"use strict";var o=e("ffc7"),a=e.n(o);a.a},"797a":function(n,t,e){"use strict";(function(n){e("334b");o(e("66fd"));var t=o(e("4554"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},ee1e:function(n,t,e){"use strict";e.r(t);var o=e("f315"),a=e.n(o);for(var r in o)"default"!==r&&function(n){e.d(t,n,(function(){return o[n]}))}(r);t["default"]=a.a},f315:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(e("a34a")),a=r(e("e2fe"));function r(n){return n&&n.__esModule?n:{default:n}}function s(n,t,e,o,a,r,s){try{var c=n[r](s),i=c.value}catch(l){return void e(l)}c.done?t(i):Promise.resolve(i).then(o,a)}function c(n){return function(){var t=this,e=arguments;return new Promise((function(o,a){var r=n.apply(t,e);function c(n){s(r,o,a,c,i,"next",n)}function i(n){s(r,o,a,c,i,"throw",n)}c(void 0)}))}}var i=function(){Promise.all([e.e("common/vendor"),e.e("components/r-canvas/r-canvas")]).then(function(){return resolve(e("c910"))}.bind(null,e)).catch(e.oe)},l={components:{rCanvas:i},data:function(){return{gift:[],gifts:[],keynum:"keynum",QRcodeUrl:"",imageUrl:"",goodsname:"",cost_price:"",posterUrl:"",url:"",com:1,length:0,bgUrl:"https://slxcx.oss-cn-beijing.aliyuncs.com/xcx-static/payment/gift_hb.png",flowUrl:"https://slxcx.oss-cn-beijing.aliyuncs.com/xcx-static/payment/hdj.png"}},onLoad:function(t){var e=this;this.url=a.default.URL;var r=t.cardbag_number,s="get_cardbag_detail",i='{"cardbag_number":"'+r+'","cardbag_detail_id":"0"}';this.$utils.post(s,i).then((function(t){console.log("礼包",t),1==t.goods_list.length?(e.gift=t.goods_list,e.goodsname=t.goods_list[0].goodsname,e.goodsnum=t.goods_list[0].goodsnum,e.imageUrl=t.goods_list[0].head_img,e.length=t.goods_list.length,e.com=1):(e.gifts=t.goods_list,e.goodsname=t.goods_list[0].goodsname,e.goodsnum=t.goods_list[0].goodsnum,e.imageUrl=t.goods_list[0].head_img,e.length=t.goods_list.length,e.com=2),console.log(e),n.showToast({title:"生成中",icon:"loading"});var a="get_haibao",s=JSON.stringify({scene:r,page:"pages/shopping/receive"});e.$utils.post(a,s).then((function(n){console.log(n),e.QRcodeUrl=e.url+n.dir,console.log("QRcodeUrl:",e.QRcodeUrl)})).then((function(t){e.$nextTick(c(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.rCanvas.init({canvas_id:"rCanvas",canvas_width:375,canvas_height:636,hidden:!0});case 2:return t.next=4,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.bgUrl),x:15,y:10,w:350,h:520}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 4:if(1!=e.com){t.next=17;break}return t.next=7,e.$refs.rCanvas.fillRoundRect({x:100,y:100,w:180,h:200,radius:10,fill_color:"#CCB586"});case 7:return t.next=9,e.$refs.rCanvas.fillRoundRect({x:102,y:102,w:176,h:196,radius:10,fill_color:"rgb(255, 255, 255)"});case 9:return t.next=11,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.flowUrl),x:180,y:90,w:20,h:20}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 11:return t.next=13,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.imageUrl),x:125,y:130,w:130,h:120}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 13:return t.next=15,e.$refs.rCanvas.drawText({text:e.goodsname.substr(0,6),x:160,y:280,max_width:100,font_color:"#333333",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 15:t.next=39;break;case 17:return t.next=19,e.$refs.rCanvas.fillRoundRect({x:65,y:100,w:255,h:80,radius:10,fill_color:"#CCB586"});case 19:return t.next=21,e.$refs.rCanvas.fillRoundRect({x:66,y:101,w:253,h:78,radius:10,fill_color:"#fff"});case 21:return t.next=23,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.imageUrl),x:71,y:115,w:60,h:50}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 23:return t.next=25,e.$refs.rCanvas.drawText({text:e.goodsname.substr(0,6),x:150,y:130,max_width:200,font_color:"#333333",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 25:return t.next=27,e.$refs.rCanvas.drawText({text:"共"+e.goodsnum+"件",x:150,y:160,font_color:"#666666",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 27:return t.next=29,e.$refs.rCanvas.fillRoundRect({x:65,y:200,w:255,h:80,radius:10,fill_color:"#CCB586"});case 29:return t.next=31,e.$refs.rCanvas.fillRoundRect({x:66,y:201,w:253,h:78,radius:10,fill_color:"#fff"});case 31:return t.next=33,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.imageUrl),x:71,y:210,w:60,h:50}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 33:return t.next=35,e.$refs.rCanvas.drawText({text:e.goodsname.substr(0,6),x:150,y:230,max_width:200,font_color:"#333333",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 35:return t.next=37,e.$refs.rCanvas.drawText({text:"共"+e.goodsnum+"件",x:150,y:260,font_color:"#666666",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 37:return t.next=39,e.$refs.rCanvas.drawText({text:"•••",x:170,y:310,font_color:"#FADEA5"}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 39:return t.next=41,e.$refs.rCanvas.drawText({text:"熊猫为你挑选了"+e.length+"件礼物",x:110,y:340,font_color:"#FADEA5",font_size:16}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 41:return t.next=43,e.$refs.rCanvas.drawImage({url:e.$utils.imageUrl(e.QRcodeUrl),x:154,y:373,w:70,h:70,radius:16}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 43:return t.next=45,e.$refs.rCanvas.drawText({text:"长按小程序码领礼物\n           先到先得",x:130,y:470,max_width:130,font_color:"#FFF8F8",font_size:14}).catch((function(t){n.showToast({title:t,icon:"none"})}));case 45:return t.next=47,e.$refs.rCanvas.draw((function(t){n.hideLoading(),e.posterUrl=t.tempFilePath}));case 47:case"end":return t.stop()}}),t)}))))}))}))}};t.default=l}).call(this,e("543d")["default"])},ffc7:function(n,t,e){}},[["797a","common/runtime","common/vendor"]]]);