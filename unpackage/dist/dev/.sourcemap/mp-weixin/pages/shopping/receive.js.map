{"version":3,"sources":["uni-app:///main.js","webpack:////Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/receive.vue?0c30","webpack:////Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/receive.vue?1416","webpack:////Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/receive.vue?c21b","webpack:////Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/receive.vue?72eb","uni-app:///pages/shopping/receive.vue","webpack:////Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/receive.vue?4a2c"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","g0","_self","_c","gift","$utils","imageUrl","head_img","g1","osspath_url","g2","g3","g4","radio","g5","g6","g7","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,+C,mDACAA,EAAWC,a;;;;2DCHX,8QACIC,EADJ,qMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6BACZ,aAAAF,E;;;;2GCvBf,4yC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACG,MAAbN,EAAIO,KAAeP,EAAIQ,OAAOC,SAAST,EAAIU,UAAY,MAC5DC,EACW,MAAbX,EAAIO,KACAP,EAAIQ,OAAOI,YAAY,8BACvB,KACFC,EACW,MAAbb,EAAIO,KACAP,EAAIQ,OAAOI,YAAY,kCACvB,KACFE,EACW,MAAbd,EAAIO,KACAP,EAAIQ,OAAOI,YAAY,6BACvB,KACFG,EACW,MAAbf,EAAIO,MAAgBP,EAAIgB,MACpBhB,EAAIQ,OAAOI,YAAY,qCACvB,KACFK,EACW,MAAbjB,EAAIO,MAAiBP,EAAIgB,MAErB,KADAhB,EAAIQ,OAAOI,YAAY,oCAEzBM,EACW,MAAblB,EAAIO,KACAP,EAAIQ,OAAOI,YAAY,6BACvB,KACFO,EACW,MAAbnB,EAAIO,KACAP,EAAIQ,OAAOI,YAAY,mCACvB,KACNZ,EAAIoB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLpB,GAAIA,EACJO,GAAIA,EACJE,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJE,GAAIA,EACJC,GAAIA,EACJC,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtB3B,EAAO4B,eAAgB,G;;;;2DCpDvB,44BAAq1B,eAAG,G;;;;0ICuEx1B,4C,mDACA,2BACA,8BACA,yBAEA,c,MACA,CACA,KADA,WAEA,OACA,SACA,iBACA,aACA,QACA,KAEA,aAEA,cAEA,aAEA,YAEA,SAEA,SACA,aACA,aACA,SACA,4BACA,2BAGA,8BACA,uBACA,WACA,yBACA,mCACA,wCAGA,GAFA,qBAEA,kBACA,qCACA,2BACA,CACA,4BACA,UAIA,2DACA,uBACA,wCAQA,GAPA,sBACA,sCACA,sCACA,sCACA,kBACA,8DACA,wDACA,kBACA,+BAEA,uBAGA,gCACA,WACA,gCACA,WAEA,WAEA,qEACA,0BACA,qCACA,0BAGA,SAEA,KACA,cACA,cACA,qFAEA,KAGA,cAEA,UACA,cAEA,kBACA,0BACA,wCACA,cACA,cACA,qDACA,uCACA,gCACA,gDACA,8CACA,oCACA,yBAEA,KAGA,aACA,YACA,eAKA,iBAMA,2BAEA,sBAEA,oBAEA,8CACA,uCAEA,4CACA,mCAKA,iBACA,oBACA,sBACA,yBAKA,6BACA,GAEA,WACA,iBAGA,eAGA,SAEA,gCACA,gBAEA,YAGA,cAEA,WACA,kBACM,IAAN,iBAEA,QACA,SAEA,uBAEA,4BACA,8BACA,oCAGA,+BACA,IAEA,sCAEA,YAIA,cAEA,aACA,sBACA,uCAGA,uBACA,oBAEA,WAGA,uBAEA,aACA,SACA,iBAKA,MAMI,OAAJ,YACM,QAAN,OACM,KAAN,qBAII,KAAJ,YACM,KAAN,OACM,KAAN,QACM,QAAN,UACM,EAAN,QACM,EAAN,2BACQ,QAAR,qBAII,GAAJ,YACM,IAAN,OACA,gBACA,sCACM,QAAN,gCACM,EAAN,0BACM,KAAN,WACM,KAAN,YACM,KAAN,QAGA,4BACA,OACA,qBACA,eACA,eAGA,+EACA,oBAEA,wCACA,sBACA,UAGA,yCAGA,WACA,gBAEA,aACA,aACA,YACA,UAGA,2BACA,wDACA,QAFA,SAEA,GAGA,aAGA,KARA,SAQA,GAEA,cACA,eACA,YACA,eAQA,OACA,aACA,SAEA,wBACA,cACA,mDACA,yCACA,0CACA,sCACA,iCACA,0CAEA,kBACA,KAGA,wBAEA,WACA,SAyBA,gBACA,aACA,YACA,uBAMA,aACA,aACA,YACA,YACA,oBACA,wBACA,YACA,kDACA,qBAEA,Y;;;;2DC3aA,yvCAAksC,eAAG,G","file":"pages/shopping/receive.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/shopping/receive.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./receive.vue?vue&type=template&id=4d449096&\"\nvar renderjs\nimport script from \"./receive.vue?vue&type=script&lang=js&\"\nexport * from \"./receive.vue?vue&type=script&lang=js&\"\nimport style0 from \"./receive.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shopping/receive.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=template&id=4d449096&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.gift === \"0\" ? _vm.$utils.imageUrl(_vm.head_img) : null\n  var g1 =\n    _vm.gift === \"0\"\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/bot.png\")\n      : null\n  var g2 =\n    _vm.gift === \"0\"\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/per_img.png\")\n      : null\n  var g3 =\n    _vm.gift === \"1\"\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/cd.png\")\n      : null\n  var g4 =\n    _vm.gift === \"1\" && _vm.radio\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/piay_icon1.png\")\n      : null\n  var g5 =\n    _vm.gift === \"1\" && !_vm.radio\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/piay_icon.png\")\n      : null\n  var g6 =\n    _vm.gift === \"1\"\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/on.png\")\n      : null\n  var g7 =\n    _vm.gift === \"2\"\n      ? _vm.$utils.osspath_url(\"/xcx-static/wishes/mb_movie.png\")\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<!-- 文字祝福 -->\r\n\t\t<view class=\"receive\" v-if=\"gift==='0'\">\r\n\t\t\t<view class=\"receive-yello\">\r\n\t\t\t\t<image class=\"receive-head\" :src=\"$utils.imageUrl(head_img)\" mode=\"\"></image>\r\n\t\t\t\t<text class=\"receive-cat\">{{name}}</text>\r\n\t\t\t\t<view class=\"zhufu\">\r\n\t\t\t\t\t<text class=\"receive-one\">{{zhufu_msg}}</text>\r\n\t\t\t\t\t<text class=\"receive-two\">{{send_talk_msg}}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<image class=\"receive-bot\" :src=\"$utils.osspath_url('/xcx-static/wishes/bot.png')\" mode=\"\"></image>\r\n\t\t\t\t<image class=\"receive-bar\" :src=\"$utils.osspath_url('/xcx-static/wishes/per_img.png')\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"money\">\r\n\t\t\t\t\t<text class=\"chai1\" @click=\"open\">拆</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 语音 -->\r\n\t\t<view class=\"sound-border\" v-if=\"gift==='1'\">\r\n\t\t\t<image class=\"sound-bg\" src=\"https://zhijianlw.com/static/web/img/mb_recording_2021_08_28.png\" mode=\"\"></image>\r\n\t\t\t<image class=\"sound-head\" :src=\"present_memberid_headimg\" mode=\"\"></image>\r\n\t\t\t<text class=\"sound-name\">{{present_memberid_name}}</text>\r\n\t\t\t<image class=\"sound-cd\" :src=\"$utils.osspath_url('/xcx-static/wishes/cd.png')\" mode=\"\"></image>\r\n             \r\n\t\t\t <image class=\"sound-san\" @click=\"audioPlay\" v-if=\"radio\"\r\n\t\t\t \t:src=\"$utils.osspath_url('/xcx-static/wishes/piay_icon1.png')\" mode=\"\"></image>\r\n\t\t\t <image class=\"sound-san\" @click=\"audioPlay\" v-else\r\n\t\t\t \t:src=\"$utils.osspath_url('/xcx-static/wishes/piay_icon.png')\" mode=\"\"></image>\r\n\t\t\t\r\n\t\t\t<image class=\"sound-on\" @click=\"audioPlay\" :class=\"radio?'sound-on':'sound-on-rotate'\" :src=\"$utils.osspath_url('/xcx-static/wishes/on.png')\" mode=\"\"></image>\r\n\r\n\r\n\t\t\t<view class=\"slider\" @click=\"audioPlay\">\r\n\t\t\t\t<!-- <movable-area class=\"progress\" :style=\"'width:'+w+'px'\">\r\n\t\t\t\t\t<movable-view direction=\"horizontal\" damping=\"1000\" @change=\"scroll\" @touchstart=\"star\"\r\n\t\t\t\t\t\t@touchend=\"to\" class=\"progress-one\" :x=\"movable_x\">\r\n\t\t\t\t\t\t<view class=\"progress-view\">\r\n\t\t\t\t\t\t\t<view class=\"progress-circular\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</movable-view>\r\n\t\t\t\t</movable-area>\r\n\t\t\t\t<progress :percent=\"schedule\" class=\"b\" data-index=\"index\" activeColor='#D8D8D8'\r\n\t\t\t\t\tbackgroundColor='#767676' border-radius=\"10\" stroke-width=\"8\" /> -->\r\n\t\t\t\t<slider :value=\"schedule\" step=\"1\" activeColor=\"#D8D8D8\" backgroundColor=\"#767676 \" block-color=\"#D8D8D8\" block-size=\"12\"/>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"line\">熊猫送了您一份礼物，赶紧领取吧</text>\r\n\t\t\t<text class=\"chai\" @click=\"open\">拆</text>\r\n\t\t</view>\r\n\r\n        \r\n        <!-- 视频 -->\r\n        <view class=\"sound-border\" v-if=\"gift==='2'\">\r\n           \t<image class=\"sound-bg\" :src=\"$utils.osspath_url('/xcx-static/wishes/mb_movie.png')\"\r\n           \t\tmode=\"\"></image>\r\n\t\t\t\t<image class=\"sound-head\" :src=\"present_memberid_headimg\" mode=\"\"></image>\r\n\t\t\t\t<text class=\"sound-name\">{{present_memberid_name}}</text>\r\n           \t<view class=\"template-btm-information-video\"><video :src=\"zhufu_mp4\" controls></video>\r\n           \t</view>\r\n           \t\r\n           \t<text class=\"line\">熊猫送了您一份礼物，赶紧领取吧</text>\r\n           \t<text class=\"chai\" @click=\"open\">拆</text>\r\n        </view>\r\n\r\n\t\t\r\n\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport config from '../../common/config.js';\r\n\tconst recorderManager = uni.getRecorderManager();\r\n\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\tconst audioCtx = uni.createAudioContext('')\r\n\r\n\tinnerAudioContext.autoplay = true;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgift: '1',\r\n\t\t\t\tsend_talk_msg: '',\r\n\t\t\t\tzhufu_msg: '',\r\n\t\t\t\tname: '',\r\n\t\t\t\tw: '',\r\n\t\t\t\t// 进度条位置\r\n\t\t\t\tschedule: '0',\r\n\t\t\t\t// 按钮位置\r\n\t\t\t\tmovable_x: '0',\r\n\t\t\t\t// 按钮移动距离\r\n\t\t\t\tdistance: '0',\r\n\t\t\t\t// 总时长\r\n\t\t\t\tduration: '',\r\n\t\t\t\t// 1播放  0不播放\r\n\t\t\t\tstop: '0',\r\n\t\t\t\t// 页面宽度\r\n\t\t\t\twidth: '',\r\n\t\t\t\tzhufu_mp4:'',\r\n\t\t\t\tzhufu_mp3:'',\r\n\t\t\t\tradio: true,\r\n\t\t\t\tpresent_memberid_headimg:'',\r\n\t\t\t\tpresent_memberid_name:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function(e) {\r\n\t\t\tthis.url = config.URL;\r\n\t\t\tlet that = this;\r\n\t\t\tlet merberid = uni.getStorageSync('id')\r\n\t\t\tthis.sign = uni.getStorageSync('sign');\r\n\t\t\tlet send_talk_msg = uni.getStorageSync(\"send_talk_msg\")\r\n\t\t\tthis.send_talk_msg = send_talk_msg\r\n\t\t\t// 拿到传过来的礼包号\r\n\t\t\tif (e.cardbag_number) {\r\n\t\t\t\tthis.cardbag_number = e.cardbag_number;\r\n\t\t\t\tvar cardbag_number = e.cardbag_number;\r\n\t\t\t} else {\r\n\t\t\t\tthis.cardbag_number = e.scene;\r\n\t\t\t\tvar cardbag_number = e.scene;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet data = '{\"cardbag_number\":\"' + cardbag_number + '\",\"cardbag_detail_id\":\"0\"}';\r\n\t\t\tvar action = 'get_cardbag_detail';\r\n\t\t\tthis.$utils.post(action, data).then(res => {\r\n\t\t\t\tconsole.log('礼包详情', res)\r\n\t\t\t\tthis.zhufu_msg = res.cardbag_theme.zhufu_msg\r\n\t\t\t\tthis.zhufu_mp3 = res.cardbag_theme.zhufu_mp3\r\n\t\t\t\tthis.zhufu_mp4=res.cardbag_theme.zhufu_mp4\r\n\t\t\t\tthis.send_talk_msg = send_talk_msg\r\n\t\t\t\tthis.present_memberid_headimg=res.cardbag.present_memberid_headimg\r\n\t\t\t\tthis.present_memberid_name=res.cardbag.present_memberid_name\r\n\t\t\t\tif (res.cardbag.type == 3) {\r\n\t\t\t\t\tvar time = Date.parse(new Date()) / 1000;\r\n\t\t\t\t\t// console.log('当前时间戳',time)\r\n\t\t\t\t\tvar fixedtime = res.cardbag.fixed_time\r\n\t\t\t\t\t// console.log('开奖时间戳',fixedtime)\r\n\t\t\t\t}\r\n\t\t\t\tif (res.cardbag_theme.zhufu_type == \"1\") {\r\n\t\t\t\t\tthis.gift = '1'\r\n\t\t\t\t} else if (res.cardbag_theme.zhufu_type == \"0\") {\r\n\t\t\t\t\tthis.gift = '0'\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.gift = '2'\r\n\t\t\t\t}\r\n\t\t\t\tvar data = '{\"cardbag_number\":\"' + e.cardbag_number + '\",\"memberid\":\"' + merberid + '\"}';\r\n\t\t\t\tvar action = 'check_receive_cardbag';\r\n\t\t\t\tthis.$utils.post(action, data).then(re => {\r\n\t\t\t\t\tconsole.log('判断礼包是否领取', re)\r\n\t\t\t\t\t// sta  0不可领  1可领取\r\n\t\t\t\t\t// 定时开奖   0未参与不调走  1参与没返回id之类的\r\n\t\t\t\t\tif (re.sta == 1) {\r\n\t\t\t\t\t\t// 定时开奖未领取到礼包还能进去的\r\n\t\t\t\t\t\tif (time > fixedtime) {\r\n\t\t\t\t\t\t\tthis.display = '0';\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '../redEnvelopes/redEnvelopes?cardbag=' + cardbag_number +\r\n\t\t\t\t\t\t\t\t\t'&cardbag_detail_id=' + '0' + '&cardbag_number=' +\r\n\t\t\t\t\t\t\t\t\tcardbag_number,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.display = '1';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (re.sta == 0) {\r\n\t\t\t\t\t\tthis.display = '1';\r\n\r\n\t\t\t\t\t\tif (re.cardbag_number) {\r\n\t\t\t\t\t\t\tthis.number = re.cardbag_number;\r\n\t\t\t\t\t\t\tthis.cardbag_detail_id = re.cardbag_detail_id\r\n\t\t\t\t\t\t\tthis.display = '0';\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '../redEnvelopes/redEnvelopes?cardbag_number=' + re\r\n\t\t\t\t\t\t\t\t\t.cardbag_number + '&cardbag_detail_id=' + re\r\n\t\t\t\t\t\t\t\t\t.cardbag_detail_id + '&cardbag=' + cardbag_number +\r\n\t\t\t\t\t\t\t\t\t'&head_img=' + res.cardbag.present_memberid_headimg +\r\n\t\t\t\t\t\t\t\t\t'&all_details_num=' + res.cardbag.all_details_num +\r\n\t\t\t\t\t\t\t\t\t'&present_memberid_name=' + res.cardbag\r\n\t\t\t\t\t\t\t\t\t.present_memberid_name,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (time < fixedtime) {\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: re.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.display = '1';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// 模板信息\r\n\t\t\t\tthis.template = res.cardbag_theme;\r\n\t\t\t\t// 判断当前礼包是否为定时开奖\r\n\t\t\t\tthis.type = res.cardbag.type;\r\n\t\t\t\t// 礼包信息\r\n\t\t\t\tthis.cardbag = res.cardbag;\r\n\t\t\t\t// 头像 昵称\r\n\t\t\t\tthis.head_img = res.cardbag.present_memberid_headimg;\r\n\t\t\t\tthis.name = res.cardbag.present_memberid_name;\r\n\t\t\t\t// 是否领取\r\n\t\t\t\tthis.all_details_num = res.cardbag.all_details_num\r\n\t\t\t\tthis.id = res.cardbag.present_memberid;\r\n\r\n\t\t\t})\r\n              \r\n\t\t\t  // 音频用到的宽度\r\n\t\t\t  uni.getSystemInfo({\r\n\t\t\t  \tsuccess: (res) => {\r\n\t\t\t  \t\tthat.width = res.screenWidth,\r\n\t\t\t  \t\t\tthat.w = res.screenWidth * 0.57\r\n\t\t\t  \t},\r\n\t\t\t  })\r\n\t\t\t  \r\n\t\t\t//判断是否登录\r\n\t\t\tvar id = uni.getStorageSync('id')\r\n\t\t\tif (id) {\r\n\t\t\t\t// console.log('登录')\r\n\t\t\t\tthis.idd = id;\r\n\t\t\t\tthis.sign = '200'\r\n\t\t\t} else {\r\n\t\t\t\t// console.log('未登录')\r\n\t\t\t\tthis.sign = '0'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 播放录音\r\n\t\t\taudioPlay: function() {\r\n\t\t\t\tthis.schedule = 0;\r\n\t\t\t\t// 开始播放\r\n\t\t\t\tthis.stop = 1;\r\n\t\t\t\t// 左边小喇叭动\r\n\t\t\t\t// this.radio = 1;\r\n\t\t\t\tthis.radio = false\r\n\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log('播放')\r\n                 let zhufu_mp3=this.zhufu_mp3\r\n\t\t\t\t// 播放路径\r\n\t\t\t\tinnerAudioContext.src = zhufu_mp3\r\n\t\t\t\tinnerAudioContext.play();\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\r\n\t\t\t\t\tinnerAudioContext.onTimeUpdate((res) => {\r\n\t\t\t\t\t\tconsole.log('总时长', innerAudioContext.duration)\r\n\t\t\t\t\t\tconsole.log('当前播放进度', innerAudioContext.currentTime)\r\n\r\n\t\t\t\t\t\t// 已播放进度条\r\n\t\t\t\t\t\tlet schedule = innerAudioContext.currentTime / innerAudioContext.duration *\r\n\t\t\t\t\t\t\t100;\r\n\t\t\t\t\t\t// 白色圆点\r\n\t\t\t\t\t\tlet x = (that.width * 0.57 - that.width * 0.57 * 0.07) * schedule / 100;\r\n\r\n\t\t\t\t\t\tif (this.stop == 0) {\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 白色圆点\r\n\t\t\t\t\t\t\tthis.movable_x = x;\r\n\t\t\t\t\t\t\t// 进度条\r\n\t\t\t\t\t\t\tthis.schedule = schedule;\r\n\t\t\t\t\t\t\tthis.duration = innerAudioContext.duration;\r\n\t\t\t\t\t\t\tconsole.log(innerAudioContext.duration / innerAudioContext.currentTime)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 播放结束\r\n\t\t\t\t\t\tinnerAudioContext.onEnded((res) => {\r\n\t\t\t\t\t\t\tconsole.log('结束', res)\r\n\t\t\t\t\t\t\t// 左边小喇叭停止\r\n\t\t\t\t\t\t\tthat.radio = true;\r\n\t\t\t\t\t\t\t// 按钮    最右边\r\n\t\t\t\t\t\t\t// this.movable_x = that.width * 0.57;\r\n\t\t\t\t\t\t\tthat.movable_x = that.width * 0.5;\r\n\t\t\t\t\t\t\t// 进度条  满\r\n\t\t\t\t\t\t\tthat.schedule = 0\r\n\t\t\t\t\t\t\tthat.stop=0\r\n\t\t\t\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t},500)\r\n\r\n\r\n\t\t\t},\r\n\r\n            // 滑动\r\n            scroll: function(e) {\r\n            \tconsole.log(e)\r\n            \tthis.distance = e.detail.x\r\n            },\r\n            \r\n            // 按住\r\n            star: function(e) {\r\n            \tthis.stop = 0;\r\n            \tthis.click = 0;\r\n            \tconsole.log('暂停')\r\n            \tinnerAudioContext.pause()\r\n            \tinnerAudioContext.offTimeUpdate((res) => {\r\n            \t\tconsole.log('取消监听进度条', res)\r\n            \t})\r\n            },\r\n            // 停止\r\n            to: function(e) {\r\n            \tlet that = this;\r\n            \tlet s = this.distance;\r\n            \tlet time = s / (that.width * 0.57 - that.width * 0.57 * 0.07) * 100;\r\n            \tconsole.log('跳转位置', this.duration * time / 100)\r\n            \tinnerAudioContext.seek(this.duration * time / 100)\r\n            \tthis.schedule = time;\r\n            \tthis.movable_x = s;\r\n                this.stop=0\r\n            }, \r\n\r\n\t\t\topen: function(e) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (this.sign == '200') {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在领取'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 领取红包\r\n\t\t\t\t\tvar data = '{\"cardbag_number\":\"' + this.cardbag_number + '\",\"memberid\":\"' + this.idd + '\"}';\r\n\t\t\t\t\tvar action = 'receive_cardbag';\r\n\t\t\t\t\t// console.log(data)\r\n\t\t\t\t\tthis.$utils.post(action, data).then(res => {\r\n\t\t\t\t\t\tconsole.log('领取卡包', res)\r\n\t\t\t\t\t\tif (res.sta == 1) {\r\n\r\n\t\t\t\t\t\t\t// 存入本地缓存\r\n\t\t\t\t\t\t\tuni.setStorageSync('new_cardbag_number', res)\r\n\r\n\t\t\t\t\t\t\t// 定时开奖的话  未到开奖时间提示\r\n\t\t\t\t\t\t\tif (this.type == 3) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t// 提示参与成功\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '成功参与',\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// 调用订阅消息\r\n\t\t\t\t\t\t\t\tuni.requestSubscribeMessage({\r\n\t\t\t\t\t\t\t\t\ttmplIds: ['K7Go9Ex49p5hfB8qm3LhggEDJoZ1p2mKu2lyspAsqM0'],\r\n\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t// console.log(res)\r\n\r\n\t\t\t\t\t\t\t\t\t\tthat.dingyue();\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\t\t\t// console.log('失败',res) \r\n\t\t\t\t\t\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.errMsg,\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 即时开奖\r\n\t\t\t\t\t\t\telse if (this.type == 4) {\r\n\t\t\t\t\t\t\t\tinnerAudioContext.src = that.auto;\r\n\t\t\t\t\t\t\t\tinnerAudioContext.play();\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function(e) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../redEnvelopes/redEnvelopes?cardbag_number=' +\r\n\t\t\t\t\t\t\t\t\t\t\tres.cardbag_number + '&cardbag_detail_id=' + res\r\n\t\t\t\t\t\t\t\t\t\t\t.cardbag_detail_id + '&head_img=' + that.head_img +\r\n\t\t\t\t\t\t\t\t\t\t\t'&all_details_num=' + that.all_details_num +\r\n\t\t\t\t\t\t\t\t\t\t\t'&present_memberid_name=' + that.name +\r\n\t\t\t\t\t\t\t\t\t\t\t'&old_cardbag_number=' + that.cardbag_number,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}, 500)\r\n\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function(e) {\r\n\t\t\t\t\t\t\t\t\t// console.log('停止')\r\n\t\t\t\t\t\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t\t\t\t\t\t}, 2200)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tinnerAudioContext.src = that.auto;\r\n\t\t\t\t\t\t\t\tinnerAudioContext.play();\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function(e) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../redEnvelopes/redEnvelopes?cardbag_number=' +\r\n\t\t\t\t\t\t\t\t\t\t\tres.cardbag_number + '&cardbag_detail_id=' + res\r\n\t\t\t\t\t\t\t\t\t\t\t.cardbag_detail_id + '&head_img=' + that.head_img +\r\n\t\t\t\t\t\t\t\t\t\t\t'&all_details_num=' + that.all_details_num +\r\n\t\t\t\t\t\t\t\t\t\t\t'&present_memberid_name=' + that.name +\r\n\t\t\t\t\t\t\t\t\t\t\t'&old_cardbag_number=' + that.cardbag_number,\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function(e) {\r\n\t\t\t\t\t\t\t\t\t// console.log('停止')\r\n\t\t\t\t\t\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t\t\t\t\t\t}, 2200)\r\n\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tmask: 'true',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tsetTimeout(function(e) {\r\n\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\turl: '../signin/signin?receive=' + 'on' +\r\n\t\t\t\t\t\t\t\t\t\t'&cardbag_number=' + that.cardbag_number\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import '@/common/receive.css';\r\n\t@import '@/common/sound.css';\r\n\r\n\t.zhufu {\r\n\t\twidth: 556rpx;\r\n\t\theight: 180rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tflex-wrap: wrap;\r\n\t\tline-height: 40rpx;\r\n\t\tmargin-top: 30rpx;\r\n\t}\r\n\t.progress-one {\r\n\t\twidth: 35rpx;\r\n\t\theight: 35rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: absolute;\r\n\t\ttop: 65px;\r\n\t}\r\n\t.template-btm-information-video{\r\n\t\tposition: absolute;\r\n\t\ttop: 180rpx;\r\n\t\tleft: 25rpx;\r\n\t}\r\n\t.b{\r\n\t\twidth: 410rpx;\r\n\t\theight: 50rpx;\r\n\t\tmargin-top: -26rpx;\r\n\t}\r\n\t.rotate{\r\n\t\ttransform: rotate(-45deg);\r\n\t\tanimation: 2s;\r\n\t}\r\n\t.sound-san{\r\n\t\ttop: 364rpx;\r\n\t}\r\n\t.sound-on {\r\n\t    width: 196rpx;\r\n\t    height: 90rpx;\r\n\t    position: absolute;\r\n\t    top: 170rpx;\r\n\t    left: 296rpx;\r\n\t}\r\n\t.sound-on-rotate {\r\n\t    width: 196rpx;\r\n\t    height: 90rpx;\r\n\t    position: absolute;\r\n\t    top: 222rpx;\r\n\t    left: 286rpx;\r\n\t\ttransform: rotate(-45deg);\r\n\t\tanimation: 2s;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./receive.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}