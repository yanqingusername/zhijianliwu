(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/balance/Recharge"],{183:
/*!*******************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/main.js?{"page":"pages%2Fbalance%2FRecharge"} ***!
  \*******************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */4);o(n(/*! vue */2));var t=o(n(/*! ./pages/balance/Recharge.vue */184));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},184:
/*!************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue ***!
  \************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./Recharge.vue?vue&type=template&id=71f8ec13& */185),a=n(/*! ./Recharge.vue?vue&type=script&lang=js& */187);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n(/*! ./Recharge.vue?vue&type=style&index=0&lang=css& */189);var r,s=n(/*! ../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),c=Object(s["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);c.options.__file="pages/balance/Recharge.vue",t["default"]=c.exports},185:
/*!*******************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=template&id=71f8ec13& ***!
  \*******************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Recharge.vue?vue&type=template&id=71f8ec13& */186);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},186:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=template&id=71f8ec13& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return o}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=!1,r=[];a._withStripped=!0},187:
/*!*************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Recharge.vue?vue&type=script&lang=js& */188),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},188:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(/*! ../../common/md5.js */12)),a=(i(n(/*! ../../common/weapp.qrcode.min.js */116)),i(n(/*! ../../common/config.js */13)));function i(e){return e&&e.__esModule?e:{default:e}}var r={data:function(){return{ip:"",balance:[{price:"100",give:"5元"},{price:"200",give:"15元"},{price:"300",give:"20元"},{price:"500",give:"50元"},{price:"1000",give:"120元"},{price:"2000",give:"300元"}],number:0,appid:"",key:"",merchantCode:"",totalAmount:"",outTradeNo:"",notifyUrl:"",money:"0",balanc:"",id:"",timeStamp:"",nums:"",value:"",checknum:0,payMoney:"",inputmoney:"",inputprice:""}},onLoad:function(t){var n=this;this.content();for(var o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a="",i=0;i<32;i++){var r=parseInt(61*Math.random());a+=o[r]}this.nums=a,this.timeStamp=(new Date).getTime();var s="{}",c="get_payconfig";this.$utils.post(c,s).then((function(t){console.log("第三方参数",t),n.appid=t.rs.appid,n.key=t.rs.key,n.merchantCode=t.rs.merchantCode,n.openid=e.getStorageSync("openid")})),this.login()},onShow:function(){},methods:{content:function(e){var t=this,n="{}",o="get_recharge_give";this.$utils.post(o,n).then((function(e){console.log(e.rs),t.balance=e.rs,t.id=e.rs[0].id,e.rs.length>0?t.payMoney=e.rs[0].give_money:t.payMoney=0}))},button:function(t){var n=this,o=e.getStorageSync("id"),i="微信支付";if(0==this.money)var r='{"memberid":"'+o+'","recharge_give_id":"'+this.id+'","recharge_way":"'+i+'"}';else r='{"memberid":"'+o+'","money":"'+this.money+'","recharge_way":"'+i+'"}';var s="create_member_recharge";this.$utils.post(s,r).then((function(t){console.log("在线充值",t),1==t.sta?(e.showLoading({title:"加载中",mask:!0}),n.totalAmount=t.money,n.outTradeNo=t.serial_number,n.notifyUrl=a.default.URL+"api.php/index/set_agent_recharge?serial_number="+t.serial_number,n.ipp()):e.showToast({title:t.msg,icon:"none"})}))},wx:function(t){var n=this,i=this,r=this.ip,s=this.openid,c='{"serial_number":"'+i.outTradeNo+'","ip":"'+r+'","openid":"'+s+'","type":"recharge"}',u="add_paylog_to_wx";console.log(c),this.$utils.post(u,c).then((function(t){console.log("获取参数",t);var r=[],s={appId:"appId=wx9c53a99b078435f5",timeStamp:"timeStamp="+n.timeStamp,nonceStr:"nonceStr="+n.nums,package:"package=prepay_id="+t.rs.prepay_id,signType:"signType=MD5"};for(var c in console.log("拼接前",s),s)r.push(s[c]);r.sort();var u="";for(var l in r)l==r.length-1?u+=r[l]:u+=r[l]+"&";var d=u+"&key=dEEHizJM4cZtBy3Dlj4gVKwHMlM32IPv";console.log("拼接后",d);var p=o.default.hexMD5(d);console.log(p),e.hideLoading(),e.requestPayment({timeStamp:String(n.timeStamp),nonceStr:n.nums,package:"prepay_id="+t.rs.prepay_id,signType:"MD5",paySign:p.toUpperCase(),success:function(t){e.hideLoading(),e.request({url:a.default.URL+"api.php/index/set_agent_recharge",data:{serial_number:i.outTradeNo},header:{"content-type":"application/x-www-form-urlencoded"},method:"GET",success:function(t){console.log("微信成功回调",t),i.inputmoney="",setTimeout((function(){e.navigateTo({url:"./RechargeStatus?istype=2&ordernumber="+i.outTradeNo})}),500)}})},fail:function(t){e.hideLoading(),console.log(t),i.commodity="",i.inputmoney="",setTimeout((function(){e.navigateTo({url:"./RechargeStatus?istype=2&ordernumber="+i.outTradeNo})}),500)}})}))},ipp:function(t){var n=this;e.request({url:"https://pv.sohu.com/cityjson?ie=utf-8",success:function(e){console.log(e);var t=e.data.split(" "),o=t[4],a=o.replace('"',""),i=a.replace('"',""),r=i.replace(",","");n.ip=r,n.wx()}})},bala:function(e){var t=e.currentTarget.dataset.index-1;this.id=e.currentTarget.dataset.id,this.reMoney=e.currentTarget.dataset.remoney,this.gvMoney=e.currentTarget.dataset.gvmoney,this.payMoney=e.currentTarget.dataset.gvmoney,this.number=t,this.money=0,this.inputmoney=""},price:function(e){this.number="1000",this.money=e.detail.value,this.inputmoney=e.detail.value,this.payMoney=e.detail.value},left:function(t){e.navigateTo({url:"./Query"})},right:function(t){e.navigateTo({url:"./Recharge"})},code:function(e){this.display=!1},xiaochengxu:function(t){var n=this,a=[],i={appId:"appId="+this.appid,random:"random="+this.nums,merchantCode:"merchantCode="+this.merchantCode,outTradeNo:"outTradeNo="+this.outTradeNo,totalAmount:"totalAmount="+this.totalAmount,channel:"channel=WXPAY",tradeType:"tradeType=MINIAPP",openId:"openId="+this.openid,subAppId:"subAppId=wx9c53a99b078435f5",notifyUrl:"notifyUrl="+this.notifyUrl};for(var r in console.log(i),i)a.push(i[r]);a.sort();var s="";for(var c in a)c==a.length-1?s+=a[c]:s+=a[c]+"&";var u=s+"&key="+this.key;console.log(u);var l=o.default.hexMD5(u);console.log(l);var d={appId:"appId="+this.appid,sign:"sign="+l,random:"random="+this.nums,merchantCode:"merchantCode="+this.merchantCode,outTradeNo:"outTradeNo="+this.outTradeNo,totalAmount:"totalAmount="+this.totalAmount,channel:"channel=WXPAY",tradeType:"tradeType=MINIAPP",openId:"openId="+this.openid,subAppId:"subAppId=wx9c53a99b078435f5",notifyUrl:"notifyUrl="+this.notifyUrl};console.log(d);var p=[];for(var h in d)p.push(d[h]);p.sort();var f="";for(var m in p)m==p.length-1?f+=p[m]:f+=p[m]+"&";console.log("字符串",f),e.request({url:"https://api.liantuofu.com/open/precreate",data:f,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){console.log(t.data),e.hideLoading(),wx.requestPayment({timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.payPackage,signType:t.data.signType,paySign:t.data.paySign,success:function(t){n.login(),wx.showModal({title:"微信支付",content:"支付成功",cancelText:"个人中心",confirmText:"再次充值",success:function(t){t.confirm?console.log("再次充值"):t.cancel&&(console.log("个人中心"),e.switchTab({url:"../personal/personal"}))}})},fail:function(e){console.log(e)}})}})},login:function(){var t=this,n=(this.Data,e.getStorageSync("openid")),o='{"wx_openid":"'+n+'"}',a="member_login";this.$utils.post(a,o).then((function(e){console.log("基本信息",e.rs),null==e.rs.balance||""==e.rs.balance||(t.balanc=e.rs.balance)}))},input:function(e){this.value=e.detail.value,this.inputprice=e.detail.value},rechargebutton:function(t){var n=this,o=e.getStorageSync("id");if(""==o)return e.showToast({title:"请先登录！",icon:"none"}),!1;var a=this.value;if(""==a)return e.showToast({title:"请输入礼品卡背面的兑换码！",icon:"none"}),!1;var i="order",r="bind_client_card",s=JSON.stringify({memberid:o,cardpwd:a});this.$utils.postNew(r,s,i).then((function(t){if(console.log(t),1==t.sta){n.inputprice="",n.value="";var o=t.rs;setTimeout((function(){e.navigateTo({url:"./RechargeStatus?istype=1&ordernumber="+o})}),500)}else n.inputprice="",n.value="",e.showToast({title:t.msg,icon:"none",mask:"true"})}))},nav:function(e){var t=e.currentTarget.dataset.index;this.checknum=t}}};t.default=r}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},189:
/*!*********************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=style&index=0&lang=css& ***!
  \*********************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Recharge.vue?vue&type=style&index=0&lang=css& */190),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},190:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/balance/Recharge.vue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[183,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/balance/Recharge.js.map