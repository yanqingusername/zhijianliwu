(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/shopping"],{80:
/*!********************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/main.js?{"page":"pages%2Fshopping%2Fshopping"} ***!
  \********************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){o(/*! uni-pages */5);s(o(/*! vue */3));var e=s(o(/*! ./pages/shopping/shopping.vue */81));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},81:
/*!*************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue ***!
  \*************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var s=o(/*! ./shopping.vue?vue&type=template&id=24f06b86& */82),i=o(/*! ./shopping.vue?vue&type=script&lang=js& */84);for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o(/*! ./shopping.vue?vue&type=style&index=0&lang=css& */86);var r,a=o(/*! ../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */20),u=Object(a["default"])(i["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],r);u.options.__file="pages/shopping/shopping.vue",e["default"]=u.exports},82:
/*!********************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=template&id=24f06b86& ***!
  \********************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e);var s=o(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping.vue?vue&type=template&id=24f06b86& */83);o.d(e,"render",(function(){return s["render"]})),o.d(e,"staticRenderFns",(function(){return s["staticRenderFns"]})),o.d(e,"recyclableRender",(function(){return s["recyclableRender"]})),o.d(e,"components",(function(){return s["components"]}))},83:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=template&id=24f06b86& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";var s;o.r(e),o.d(e,"render",(function(){return i})),o.d(e,"staticRenderFns",(function(){return r})),o.d(e,"recyclableRender",(function(){return n})),o.d(e,"components",(function(){return s}));try{s={uniPopup:function(){return o.e(/*! import() | uni_modules/uni-popup/components/uni-popup/uni-popup */"uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,/*! @/uni_modules/uni-popup/components/uni-popup/uni-popup.vue */889))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,o=(t._self._c,0==t.com?t.$utils.osspath_url("/xcx-static/xiong.png"):null),s=0!=t.com?t.__map(t.goodsinfo,(function(e,o){var s=t.__get_orig(e),i=t.$utils.imageUrl(e.goodsinfo.head_img),n=t.$utils.cut_str(e.goodsinfo.goodsname,16);return{$orig:s,g1:i,g2:n}})):null,i=0!=t.com?t.__map(t.undercarriage_list,(function(e,o){var s=t.__get_orig(e),i=t.$utils.imageUrl(e.goodsinfo.head_img),n=t.$utils.cut_str(e.goodsinfo.goodsname,16);return{$orig:s,g3:i,g4:n}})):null,n=t.isShowPop&&t.unShopList.length>0&&1==t.unShopList.length?t.__map(t.unShopList,(function(e,o){var s=t.__get_orig(e),i=t.$utils.cut_str(e.goodsname,16);return{$orig:s,g5:i}})):null;t._isMounted||(t.e0=function(e,o){var s=arguments[arguments.length-1].currentTarget.dataset,i=s.eventParams||s["event-params"];o=i.item;return t.goDel.stop(o.goodsinfo.id)}),t.$mp.data=Object.assign({},{$root:{g0:o,l0:s,l1:i,l2:n}})},n=!1,r=[];i._withStripped=!0},84:
/*!**************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var s=o(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping.vue?vue&type=script&lang=js& */85),i=o.n(s);for(var n in s)"default"!==n&&function(t){o.d(e,t,(function(){return s[t]}))}(n);e["default"]=i.a},85:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(o(/*! sr-sdk-wxapp */15)),i=n(o(/*! umtrack-wx */29));function n(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{price_zhe:0,goodsinfo:[],undercarriage_list:[],goodsid:"",flag:!0,type:"",show:"2",gift:!0,chooses:1,numberss:0,com:"",fenshu:1,zhufu_type:0,id:"",setgiftssuccess:"2",setwishessuccess:"2",remark:"大吉大利，恭喜发财！",remarkNumber:0,isShowPop:!1,unShopList:[],cart_goods_id:"",shareInfo:""}},onShow:function(e){var o=this,s=getCurrentPages(),i=s[s.length-1].route;console.log("当前页面的路由",i);var n=s[s.length-1].options;console.log("当前页面的参数",n);var r=n.type;"undefined"==typeof r&&(r=0),this.type=r;var a=t.getStorageSync("id");this.memberid=a;var u='{"memberid":"'+a+'","buy_type":"'+r+'"}',g="get_giftbag_list";this.$utils.post(g,u).then((function(e){if(console.log("商品",e),e.rs.giftbag.length>=1||e.rs.undercarriage_list>=1){o.goodsinfo=e.rs.giftbag,o.undercarriage_list=e.rs.undercarriage_list,o.price_zhe=e.rs.price_zhe,o.cart_goods_id=e.rs.cart_goods_id;var s=0;for(var i in e.rs.giftbag)s+=Number(e.rs.giftbag[i].goodsnum);o.numberss=s,t.setStorageSync("type",r),o.com=!0}else o.com=!1})),this.setgiftssuccess=t.getStorageSync("setgiftssuccess"),this.setwishessuccess=t.getStorageSync("setwishessuccess");var c=t.getStorageSync("zhufu_type");this.zhufu_type=c,console.log("this.zhufu_type11"),console.log(this.zhufu_type),0==this.zhufu_type?this.zhufu_type="福语":1==this.zhufu_type?this.zhufu_type="语音":2==this.zhufu_type&&(this.zhufu_type="视频"),this.caltotalmoney()},onLoad:function(t){var e=this,o=JSON.stringify({type:"2"}),s="get_share_img";this.$utils.post(s,o).then((function(t){e.shareInfo=t.rs})),this.caltotalmoney()},onShareAppMessage:function(t){return s.default.track("page_share_app_message",{from_type:"menu",share_title:"指间礼物",share_path:"/pages/shopping/shopping",share_image_url:"",share_to:"friends"}),{title:this.shareInfo.title||"我发现了一个不错的送礼平台～",imageUrl:this.shareInfo.share_img||"https://zhijianlw.com/static/web/img/share_img.png",path:this.shareInfo.url||"/pages/index/index"}},methods:{goDel:function(e){var o=this,s=t.getStorageSync("id"),i=this,n="del_shopping_cart",r="goods",a=JSON.stringify({goodsid:e,memberid:s,buy_type:this.type});this.$utils.postNew(n,a,r).then((function(e){if(1==e.sta){o.isShowPop=!1;var s=t.getStorageSync("id"),n='{"memberid":"'+s+'","buy_type":"'+o.type+'"}',r="get_giftbag_list";o.$utils.post(r,n).then((function(t){if(console.log("商品",t),t.rs.giftbag.length>=1||t.rs.undercarriage_list>=1){i.goodsinfo=t.rs.giftbag,i.undercarriage_list=t.rs.undercarriage_list,i.price_zhe=t.rs.price_zhe,i.cart_goods_id=t.rs.cart_goods_id;var e=0;for(var o in t.rs.giftbag)e+=Number(t.rs.giftbag[o].goodsnum);i.numberss=e,i.com=!0}else i.com=!1})),o.caltotalmoney()}}))},inputRemark:function(t){this.remark=t.detail.value,this.remarkNumber=t.detail.value.length},box_gift:function(){t.navigateTo({url:"./shoppingList"})},goToDetails:function(e,o){i.default.trackEvent("Um_Event_ShoppingDetail",{Um_Key_ItemName:o.goodsinfo.goodsname,Um_Key_ItemID:o.goodsinfo.sku}),t.navigateTo({url:"../details/details?keynum="+e})},increase:function(t){console.log(t);var e=t.goodsid;this.goodsid=e,this.goodsnum=1,this.numberss+=1;var o=t.goodsnum+1;this.give(t,o),s.default.track("add_to_cart",{action_type:"append_to_cart",sku:{sku_id:t.goodsinfo.sku+"",sku_name:t.goodsinfo.goodsname+t.goods_spec_item},spu:{spu_id:t.goodsinfo.sku+"",spu_name:t.goodsinfo.goodsname},sku_num:parseInt(this.goodsnum),primary_image_url:t.goodsinfo.head_img})},reduce:function(t){var e=t.goodsid;this.goodsnum=-1,this.numberss-=1;var o=t.goodsnum-1;this.goodsid=e,this.give(t,o),s.default.track("add_to_cart",{action_type:"remove_from_cart",sku:{sku_id:t.goodsinfo.sku+"",sku_name:t.goodsinfo.goodsname+t.goods_spec_item},spu:{spu_id:t.goodsinfo.sku+"",spu_name:t.goodsinfo.goodsname},sku_num:1,primary_image_url:t.goodsinfo.head_img})},give:function(e,o){var s=this,i=t.getStorageSync("id");this.memberid=i;var n=t.getStorageSync("type");this.type=n;var r='{"memberid":"'+this.memberid+'","goodsid":"'+this.goodsid+'","num":"'+this.goodsnum+'","buy_type":"'+n+'","goods_model":"'+e.goods_model+'","goods_spec":"'+e.goods_spec+'","goods_item":"'+e.goods_spec_item+'"}',a="op_buy_shopping_cart";console.log(r),this.$utils.post(a,r).then((function(t){console.log("添加购物车",t);var e='{"memberid":"'+s.memberid+'","buy_type":"'+n+'"}',o="get_giftbag_list";s.$utils.post(o,e).then((function(t){if(console.log("更改价格",t),t.rs.giftbag.length>=1||s.undercarriage_list>=1){s.goodsinfo=t.rs.giftbag,s.undercarriage_list=t.rs.undercarriage_list,s.price_zhe=t.rs.price_zhe,s.cart_goods_id=t.rs.cart_goods_id;var e=0;for(var o in t.rs.giftbag)e+=Number(t.rs.giftbag[o].goodsnum);s.numberss=e,s.com=!0}else s.com=!1;s.caltotalmoney()}))}))},changefenshu:function(t){console.log("获取价格接口"),this.caltotalmoney()},caltotalmoney:function(e){var o=this,s=this.fenshu,i=t.getStorageSync("id");1!=this.show&&0!=this.show||(s=1);var n="get_fenshu_price",r=JSON.stringify({memberid:i,fenshu:s,buy_type:0});this.$utils.post(n,r).then((function(e){console.log(e);var s="success";if(1!=e.sta)return s="none",void t.showToast({icon:s,title:e.msg,duration:2e3});o.price_zhe=e.rs.price_zhe}))},add:function(e){i.default.trackEvent("Um_Event_addlilan",{Um_Key_ItemName:"继续加入礼篮"}),t.navigateTo({url:"./shoppingList"})},open:function(){this.$refs.popup.open()},toggle:function(t){i.default.trackEvent("Um_Event_SongLiDialog",{Um_Key_ItemName:"送礼方式弹框"}),this.$refs.popup.open()},close:function(t){this.$refs.popup.close()},chooseGift:function(e){i.default.trackEvent("Um_Event_CBlessingCard",{Um_Key_ItemName:"定制祝福卡"}),t.navigateTo({url:"../shopping/CBlessingCard"})},wishes:function(e){var o=t.getStorageSync("zhufu_type");this.zhufu_type=o;var s=t.getStorageSync("id");if(this.memberid=s,this.zhufu_type==this.zhufu_type){var i="get_giftbag_list",n=JSON.stringify({memberid:this.memberid,buy_type:0});this.$utils.post(i,n).then((function(e){console.log("直接赠送"),console.log(e);var o="success";1!=e.sta&&(o="none",t.showToast({icon:o,title:e.msg,duration:2e3})),t.navigateTo({url:"../shopping/wishes?type=0"})}))}},box1:function(){this.show="2",this.$refs.popup.close(),this.caltotalmoney()},box2:function(){this.show="1",this.$refs.popup.close(),this.caltotalmoney()},box3:function(){this.show="0",this.$refs.popup.close(),this.caltotalmoney()},packages:function(e){var o=this;if("2"===this.show){if(this.setgiftssuccess=t.getStorageSync("setgiftssuccess")||2,2==this.setgiftssuccess)return void t.showToast({icon:"none",title:"请先定制祝福卡！"});i.default.trackEvent("Um_Event_ShopZengSong",{Um_Key_ItemName:"直接赠送"}),i.default.trackEvent("Um_Event_ShopZengSongSub",{Um_Key_ItemName:"直接赠送确认订单"});var s=t.getStorageSync("type");this.type=s;var n=t.getStorageSync("id");this.memberid=n;var r='{"memberid":"'+n+'","buy_type":"'+s+'","cart_goods_id":"'+this.cart_goods_id+'"}',a="get_buy_shopping_cart";this.$utils.post(a,r).then((function(e){console.log(e),1==e.sta?(0==e.rs.goodslist.length&&t.showToast({icon:"none",title:"当前礼袋无商品"}),null!=o.zhufu_type&&null!=o.chooses&&0!=e.rs.goodslist.length&&(t.navigateTo({url:"../shopping/packages?type=0&fenshu="+o.fenshu+"&wanfa=1"}),o.fenshu=1)):2==e.sta&&(o.isShowPop=!0,o.unShopList=e.rs.undercarriage_list)}))}else if("1"===this.show){i.default.trackEvent("Um_Event_ShopPingShouQi",{Um_Key_ItemName:"拼手气礼包"}),i.default.trackEvent("Um_Event_ShopPingShouQiSub",{Um_Key_ItemName:"拼手气确认订单"});var u=t.getStorageSync("type");this.type=u;var g=t.getStorageSync("id");this.memberid=g;r='{"memberid":"'+g+'","buy_type":"'+u+'","cart_goods_id":"'+this.cart_goods_id+'"}',a="get_buy_shopping_cart";this.$utils.post(a,r).then((function(e){console.log("商品信息11",e),1==e.sta?(0==e.rs.goodslist.length&&t.showToast({icon:"success",title:"当前礼袋无商品"}),null!=o.zhufu_type&&null!=o.chooses&&0!=e.rs.goodslist.length&&(o.$forceUpdate(),t.navigateTo({url:"../shopping/packages?type=0&fenshu=1&wanfa=4&remark="+o.remark}))):2==e.sta&&(o.isShowPop=!0,o.unShopList=e.rs.undercarriage_list)}))}else{i.default.trackEvent("Um_Event_ShopBuy",{Um_Key_ItemName:"直接购买"}),i.default.trackEvent("Um_Event_ShopBuySub",{Um_Key_ItemName:"直接购买确认订单"});var c=t.getStorageSync("type");this.type=c;var l=t.getStorageSync("id");this.memberid=l;r='{"memberid":"'+l+'","buy_type":"'+c+'","cart_goods_id":"'+this.cart_goods_id+'"}',a="get_buy_shopping_cart";this.$utils.post(a,r).then((function(e){console.log(e),1==e.sta?(0==e.rs.goodslist.length&&t.showToast({icon:"success",title:"当前礼袋无商品"}),null!=o.zhufu_type&&null!=o.chooses&&0!=e.rs.goodslist.length&&t.navigateTo({url:"../shopping/must?type=0"})):2==e.sta&&(o.isShowPop=!0,o.unShopList=e.rs.undercarriage_list)}))}}}};e.default=r}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},86:
/*!**********************************************************************************************************************!*\
  !*** /Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=style&index=0&lang=css& ***!
  \**********************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var s=o(/*! -!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping.vue?vue&type=style&index=0&lang=css& */87),i=o.n(s);for(var n in s)"default"!==n&&function(t){o.d(e,t,(function(){return s[t]}))}(n);e["default"]=i.a},87:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/user/zhjian20210728/devzhijian/zhijianliwu/pages/shopping/shopping.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){}},[[80,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/shopping/shopping.js.map